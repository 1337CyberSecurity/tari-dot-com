!function(){var f=function(t,e){var i=function(){};i.prototype=t;var n=new i;if(e){var o={}.hasOwnProperty;for(var r in e)o.call(e,r)&&(n[r]=e[r])}return n},o=new function(){this.credit=new t("sounds/credit.mp3"),this.coffeeBreakMusic=new t("sounds/coffee-break-music.mp3"),this.die=new t("sounds/miss.mp3"),this.ghostReturnToHome=new t("sounds/ghost-return-to-home.mp3"),this.eatingGhost=new t("sounds/eating-ghost.mp3"),this.ghostTurnToBlue=new t("sounds/ghost-turn-to-blue.mp3",.5),this.eatingFruit=new t("sounds/eating-fruit.mp3"),this.ghostSpurtMove1=new t("sounds/ghost-spurt-move-1.mp3"),this.ghostSpurtMove2=new t("sounds/ghost-spurt-move-2.mp3"),this.ghostSpurtMove3=new t("sounds/ghost-spurt-move-3.mp3"),this.ghostSpurtMove4=new t("sounds/ghost-spurt-move-4.mp3"),this.ghostNormalMove=new t("sounds/ghost-normal-move.mp3"),this.extend=new t("sounds/extend.mp3"),this.eating=new t("sounds/eating.mp3",.5),this.startMusic=new t("sounds/start-music.mp3"),this.ghostReset=function(t){for(var e in this){if("silence"==e||"ghostReset"==e)return;e.match(/^ghost/)&&this[e].stopLoop(t)}},this.silence=function(t){for(var e in this){if("silence"==e||"ghostReset"==e)return;this[e].stopLoop(t)}}};function t(t,e){var i=new Audio(t);e&&(i.volume=e),i.load();var n=!1;function o(t){r(t)}function r(t){i.paused||(i.pause(),t||(i.currentTime=0));try{var e=i.play();e&&e.then(function(){}).catch(function(t){})}catch(t){console.error(t)}}this.play=function(t){r(t)},this.startLoop=function(t){n||(i.addEventListener("ended",o),o(t),n=!0)},this.stopLoop=function(t){try{i.removeEventListener("ended",o)}catch(t){}i.pause(),t||(i.currentTime=0),n=!1},this.isPlaying=function(){return!i.paused},this.isPaused=function(){return i.paused},this.stop=this.stopLoop}var e,n,r,s,a,l,u,h,c,_,d=function(t,e){return Math.floor(Math.random()*(e-t+1))+t},v=!1,p=!1,m=1,x=(e=["PAC-MAN","MS FLUFFY","COOKIE-MAN","CRAZY OTTO"],function(t){return null==t&&(t=m),e[t]}),T=(n=[[],["TARI LABS VALENTINES EDITION","(c) SixtyFour nibbles 2019 ","","Acknowledgements","BART GRANTHAM","SHAUN WILLIAMS","Alexey Pajitnov, the OG BOSS"],[],[]],function(t){return null==t&&(t=m),n[t]}),y=function(t){return $.drawGhostSprite},g=function(t){return $.drawMsPacmanSprite};r=function(){for(ke.invincible=!1,ke.ai=!1,l=0;l<5;l++)ze[l].isDrawPath=!1,ze[l].isDrawTarget=!1;Gi.setUpdatesPerSecond(60)},c={},_={},s=function(){for(u=ke.invincible,h=ke.ai,l=0;l<5;l++)c[l]=ze[l].isDrawPath,_[l]=ze[l].isDrawTarget},a=function(){for(ke.invincible=u,ke.ai=h,l=0;l<5;l++)ze[l].isDrawPath=c[l],ze[l].isDrawTarget=_[l]};var b,w=1,C=0,S=[0,0,0,0,0,0,0,0,0],P=[1e3,1e3,1e3,1e3,1e3,1e3,1e3,1e3],F=function(){return 2*m+(p?1:0)},M=function(t){var e=E();e<1e4&&1e4<=e+t&&(C++,j.drawMap()),k(e+=t),v||e>D()&&z(e)},E=function(){return S[F()]},k=function(t){S[F()]=t},D=function(){return P[F()]},z=function(t){P[F()]=t,A()},A=function(){localStorage&&(localStorage.highScores=JSON.stringify(P))},L=function(t){return(t+2)%4},R=function(t,e){0==e?(t.x=0,t.y=-1):3==e?(t.x=1,t.y=0):2==e?(t.x=0,t.y=1):1==e&&(t.x=-1,t.y=0)},I=function(t,e,i){var n,o,r,s,a=1/0,l={},u=0;for(s=0;s<4;s++)i[s]&&(R(l,s),(r=(n=l.x+t.x-e.x)*n+(o=l.y+t.y-e.y)*o)<a&&(a=r,u=s));return u},N=function(t,e){var i={};i[0]=Ln.isFloorTile(t.x,t.y-1),i[3]=Ln.isFloorTile(t.x+1,t.y),i[2]=Ln.isFloorTile(t.x,t.y+1),i[1]=Ln.isFloorTile(t.x-1,t.y);var n,o=0;if(null!=e){for(n=0;n<4;n++)i[n]&&o++;var r=L(e);1<o&&(i[r]=!1)}return i},B=function(t,e){return Ln.isFloorTile(t.x+e.x,t.y+e.y)},q=3,O=4,G=function(t,e,i){this.numCols=t,this.numRows=e,this.numTiles=t*e,this.widthPixels=8*t,this.heightPixels=8*e,this.tiles=i,this.doorTile={x:13,y:14},this.doorPixel={x:8*(this.doorTile.x+1)-1,y:8*this.doorTile.y+O},this.homeTopPixel=136,this.homeBottomPixel=144,this.timeEaten={},this.resetCurrent(),this.parseDots(),this.parseTunnels(),this.parseWalls()};G.prototype.save=function(t){},G.prototype.eraseFuture=function(t){var e;for(e=0;e<this.numTiles;e++)t<=this.timeEaten[e]&&delete this.timeEaten[e]},G.prototype.load=function(t,e){var i,n,o=function(t){var e,i;e=t%this.numCols,i=Math.floor(t/this.numCols),j.refreshPellet(e,i)};for(n=0;n<this.numTiles;n++)"."!=(i=this.startTiles[n])&&"o"!=i||(e<=this.timeEaten[n]?this.currentTiles[n]!=i&&(this.dotsEaten--,this.currentTiles[n]=i,o.call(this,n)):e>this.timeEaten[n]&&" "!=this.currentTiles[n]&&(this.dotsEaten++,this.currentTiles[n]=" ",o.call(this,n)))},G.prototype.resetTimeEaten=function(){this.startTiles=this.currentTiles.slice(0),this.timeEaten={}},G.prototype.resetCurrent=function(){this.currentTiles=this.tiles.split(""),this.dotsEaten=0},G.prototype.parseWalls=function(){var d=this;this.paths=[];var t,e,v={},p=function(t,e){if(-2<=t&&t<d.numCols+2&&0<=e&&e<d.numRows)return t+2+e*(d.numCols+4)},m={},i=0;for(e=0;e<this.numRows;e++)for(t=-2;t<this.numCols+2;t++,i++)"|"!=this.getTile(t,e)||"|"==this.getTile(t-1,e)&&"|"==this.getTile(t+1,e)&&"|"==this.getTile(t,e-1)&&"|"==this.getTile(t,e+1)&&"|"==this.getTile(t-1,e-1)&&"|"==this.getTile(t-1,e+1)&&"|"==this.getTile(t+1,e-1)&&"|"==this.getTile(t+1,e+1)||(m[i]=!0);var n=function(t,e){var i,n={};if(p(t+1,e)in m)i=3;else{if(!(p(t,e+1)in m))throw"tile shouldn't be 1x1 at "+t+","+e;i=2}R(n,i);for(var l,o,r,s,a,u=t+=n.x,f=e+=n.y,h=i,c=[],_=function(t,e,i){var n={};R(n,i),p(t+n.y,e-n.x)in m||(l=d.isFloorTile(t+n.y,e-n.x)?5:0);var o=-4+l,r=-i*Math.PI/2,s=Math.cos(r),a=Math.sin(r);return{x:o*s-4*a+8*(t+.5),y:o*a+4*s+8*(e+.5)}};;)if(v[p(t,e)]=!0,o=_(t,e,i),s&&(r=c[c.length-1],o.cy=0==n.x?(o.cx=o.x,r.y):(o.cx=r.x,o.y)),a=s=!1,p(t+n.y,e-n.x)in m?(i=(i+1)%4,s=!0):p(t+n.x,e+n.y)in m||(p(t-n.y,e+n.x)in m?(i=(i+3)%4,s=!0):(i=L(i),a=!0)),R(n,i),c.push(o),a&&(c.push(_(t-n.x,e-n.y,L(i))),c.push(_(t,e,i))),e+=n.y,(t+=n.x)==u&&e==f&&i==h){d.paths.push(c);break}};for(e=i=0;e<this.numRows;e++)for(t=-2;t<this.numCols+2;t++,i++)i in m&&!(i in v)&&(v[i]=!0,n(t,e))},G.prototype.parseDots=function(){var t,e;this.numDots=0,this.numEnergizers=0,this.energizers=[];var i,n=0;for(e=0;e<this.numRows;e++)for(t=0;t<this.numCols;t++)"."==(i=this.tiles[n])?this.numDots++:"o"==i&&(this.numDots++,this.numEnergizers++,this.energizers.push({x:t,y:e})),n++},G.prototype.dotsLeft=function(){return this.numDots-this.dotsEaten},G.prototype.allDotsEaten=function(){return 0==this.dotsLeft()},G.prototype.parseTunnels=(b=function(t,e,i){for(;!this.isFloorTile(t,e-1)&&!this.isFloorTile(t,e+1)&&this.isFloorTile(t,e);)t+=i;return t},function(){var t;for(this.tunnelRows={},t=0;t<this.numRows;t++)this.isFloorTile(0,t)&&this.isFloorTile(this.numCols-1,t)&&(this.tunnelRows[t]={leftEntrance:b.call(this,0,t,1),rightEntrance:b.call(this,this.numCols-1,t,-1),leftExit:-16,rightExit:8*(this.numCols+2)-1})}),G.prototype.teleport=function(t){var e=this.tunnelRows[t.tile.y];e&&(t.pixel.x<e.leftExit?t.pixel.x=e.rightExit:t.pixel.x>e.rightExit&&(t.pixel.x=e.leftExit))},G.prototype.posToIndex=function(t,e){if(0<=t&&t<this.numCols&&0<=e&&e<this.numRows)return t+e*this.numCols},G.prototype.isTunnelTile=function(t,e){var i=this.tunnelRows[e];return i&&(t<i.leftEntrance||t>i.rightEntrance)},G.prototype.getTile=function(t,e){return 0<=t&&t<this.numCols&&0<=e&&e<this.numRows?this.currentTiles[this.posToIndex(t,e)]:(t<0||t>=this.numCols)&&(this.isTunnelTile(t,e-1)||this.isTunnelTile(t,e+1))?"|":this.isTunnelTile(t,e)?" ":void 0},G.prototype.isFloorTileChar=function(t){return" "==t||"."==t||"o"==t},G.prototype.isFloorTile=function(t,e){return this.isFloorTileChar(this.getTile(t,e))};var H,W,Y,U,J,V,K,j,Q,X,Z,$=(Y=0,U=function(t,e,i,n,o,r){var s=22*e*Q,a=22*t*Q,l=22*Q,u=22*Q,f=n-11,h=o-11;r&&console.log(s,a,l,u,22,h,22,22),i.drawImage(H,s,a,l,u,f,h,22,22)},{create:function(){!function(){var t=document.getElementById("gridcanvas");if(t){var e=330*Q,i=484*Q;t.width=e,t.height=i;var n,o,r=t.getContext("2d");r.clearRect(0,0,e,i);var s=22*Q;for(r.beginPath(),n=0;n<=e;n+=s)r.moveTo(n,0),r.lineTo(n,i);for(o=0;o<=i;o+=s)r.moveTo(0,o),r.lineTo(e,o);r.lineWidth="1px",r.lineCap="square",r.strokeStyle="rgba(255,255,255,0.5)",r.stroke()}}(),H=document.getElementById("atlas"),W=H.getContext("2d");var t=330*Q,e=484*Q;H.width=t,H.height=e,0<Y&&W.restore(),Y++,W.save(),W.clearRect(0,0,t,e),W.scale(Q,Q);var r=function(t,e,i){t(22*i+11,22*e+11)},n=0;r(function(t,e){ee(W,t,e)},n,0),r(function(t,e){ie(W,t,e)},n,1),r(function(t,e){ne(W,t,e)},n,2),r(function(t,e){oe(W,t,e)},n,3),r(function(t,e){re(W,t,e)},n,4),r(function(t,e){se(W,t,e)},n,7),r(function(t,e){ae(W,t,e)},n,8),r(function(t,e){le(W,t,e)},n,9),r(function(t,e){ue(W,t,e)},n,10);var i=function(t,i){var n,o,e=0;for(n=0;n<4;n++)for(o=0;o<2;o++)r(function(t,e){Qt(W,t,e,o,n,!1,!1,!1,i)},t,e),e++};i(++n,"#FF0000"),i(++n,"#FFB8FF"),i(++n,"#00FFFF"),i(++n,"#FFB851"),n++,function(){var i,t=0;for(i=0;i<4;i++)r(function(t,e){Qt(W,t,e,0,i,!1,!1,!0,"#fff")},n,t),t++}(),r(function(t,e){Qt(W,t,e,0,0,!0,!1,!1,"#fff")},n,4),r(function(t,e){Qt(W,t,e,1,0,!0,!1,!1,"#fff")},n,5),r(function(t,e){Qt(W,t,e,0,0,!0,!0,!1,"#fff")},n,6),r(function(t,e){Qt(W,t,e,1,0,!0,!0,!1,"#fff")},n,7);var o=function(t,e,i){r(function(t,e){$t(W,t,e,i,Math.PI/6)},t,e),r(function(t,e){$t(W,t,e,i,Math.PI/3)},t,e+1)};r(function(t,e){$t(W,t,e,3,0)},++n,0),function(){var t,e=1;for(t=0;t<4;t++)o(n,e,t),e+=2}();var s=function(t,e,i){r(function(t,e){te(W,t,e,i,0)},t,e),r(function(t,e){te(W,t,e,i,1)},t,e+1),r(function(t,e){te(W,t,e,i,2)},t,e+2)};n++,function(){var t,e=0;for(t=0;t<4;t++)s(n,e,t),e+=3}(),n++,function(){var t;for(t=0;t<4;t++);}(),n++,n++,n++,n++,n++,n++,n++,r(function(t,e){Xt(W,t,e,200,"#33ffff")},++n,0),r(function(t,e){Xt(W,t,e,400,"#33ffff")},n,1),r(function(t,e){Xt(W,t,e,800,"#33ffff")},n,2),r(function(t,e){Xt(W,t,e,1600,"#33ffff")},n,3),r(function(t,e){Xt(W,t,e,100,"#ffb8ff")},n,4),r(function(t,e){Xt(W,t,e,300,"#ffb8ff")},n,5),r(function(t,e){Xt(W,t,e,500,"#ffb8ff")},n,6),r(function(t,e){Xt(W,t,e,700,"#ffb8ff")},n,7),r(function(t,e){Xt(W,t,e,1e3,"#ffb8ff")},n,8),r(function(t,e){Xt(W,t,e,2e3,"#ffb8ff")},n,9),r(function(t,e){Xt(W,t,e,3e3,"#ffb8ff")},n,10),r(function(t,e){Xt(W,t,e,5e3,"#ffb8ff")},n,11),r(function(t,e){Zt(W,t,e,100,"#fff")},++n,0),r(function(t,e){Zt(W,t,e,200,"#fff")},n,1),r(function(t,e){Zt(W,t,e,500,"#fff")},n,2),r(function(t,e){Zt(W,t,e,700,"#fff")},n,3),r(function(t,e){Zt(W,t,e,1e3,"#fff")},n,4),r(function(t,e){Zt(W,t,e,2e3,"#fff")},n,5),r(function(t,e){Zt(W,t,e,5e3,"#fff")},n,6),r(function(t,e){Zt(W,t,e,-100,"#fff")},n,7),r(function(t,e){he(W,t,e,"#0ff")},++n,0),r(function(t,e){he(W,t,e,"#FFF")},n,1),n++,n++,r(function(t,e){_e(W,t,e)},++n,0),r(function(t,e){de(W,t,e)},n,1),r(function(t,e){ve(W,t,e)},n,2),r(function(t,e){pe(W,t,e)},n,3),r(function(t,e){me(W,t,e)},n,4)},getCanvas:function(){return H},drawGhostSprite:J=function(t,e,i,n,o,r,s,a,l){var u,f;a?(u=5,f=o):r?(u=5,f=s?6:4,f+=n):(f=2*o+n,u=l==Pe.color?1:l==Fe.color?2:l==Me.color?3:l==Ee.color?4:5),U(u,f,t,e,i)},drawMonsterSprite:function(t,e,i,n,o,r,s,a,l){var u,f;a?(u=13,f=o):r?(u=13,f=s?6:4,f+=n):(f=2*o+n,u=l==Pe.color?9:l==Fe.color?10:l==Me.color?11:l==Ee.color?12:13),U(u,f,t,e,i)},drawMuppetSprite:function(t,e,i,n,o,r,s,a,l){r?V(t,e,i,s?"cookieface":"cookie"):J(t,e,i,n,o,r,s,a,l)},drawOttoSprite:function(t,e,i,n,o){var r,s;0==n?(r=o,s=14):3==n?(r=o+4,s=14):2==n?(r=o,s=15):1==n&&(r=o+4,s=15),U(s,r,t,e,i)},drawMsOttoSprite:function(t,e,i,n,o){var r,s;0==n?(r=o,s=19):3==n?(r=o+4,s=19):2==n?(r=o,s=20):1==n&&(r=o+4,s=20),U(s,r,t,e,i)},drawPacmanSprite:function(t,e,i,n,o){U(6,0==o?0:2*n+1+(o-1),t,e,i)},drawMsPacmanSprite:function(t,e,i,n,o){U(7,3*n+o,t,e,i)},drawCookiemanSprite:function(t,e,i,n,o){U(8,3*n+o,t,e,i)},drawFruitSprite:V=function(t,e,i,n){var o=["monero","bitcoin","ripple","grin","tari"].includes(n)?21:0;U(o,{cherry:0,strawberry:1,orange:2,apple:3,melon:4,galaxian:5,bell:6,key:7,pretzel:8,pear:9,banana:10,cookie:11,cookieface:12,monero:0,bitcoin:1,ripple:2,grin:3,tari:4}[n],t,e,i)},drawGhostPoints:function(t,e,i,n){var o={200:0,400:1,800:2,1600:3}[n];null!=o&&U(16,o,t,e,i)},drawPacFruitPoints:function(t,e,i,n){var o={100:4,300:5,500:6,700:7,1e3:8,2e3:9,3e3:10,5e3:11}[n];null!=o&&U(16,o,t,e,i)},drawMsPacFruitPoints:function(t,e,i,n){var o={100:0,200:1,500:2,700:3,1e3:4,2e3:5,5e3:6,"-100":7}[n];null!=o&&U(17,o,t,e,i)},drawSnail:function(t,e,i,n){U(18,n,t,e,i)}}),tt=226,et=290,it=function(){var t,d,h,e=2;Q=e;var i,n=0,o=function(){var t=(window.innerWidth-10)/290,e=(window.innerHeight-10)/354,i=Math.min(t,e);return i*=1},r=function(){Q=e=o(),function(){X.width=290*e,X.height=354*e;X.style.width=X.width/1,X.style.height=X.height/1,0<n&&d.restore(),d.save(),d.scale(e,e),t.width=tt*e,t.height=et*e,0<n&&h.restore(),h.save(),h.scale(e,e),n++}(),$.create(),j&&j.drawMap(),s()},s=function(){var t=290*(o()/1);Math.max(0,(window.innerWidth-10)/2-t/2);document.body.style.marginLeft=(window.innerWidth-t)/2+"px"};X=document.getElementById("canvas"),t=document.createElement("canvas"),d=X.getContext("2d"),h=t.getContext("2d"),r(),window.addEventListener("resize",function(){clearTimeout(i),i=setTimeout(r,100)},!1);var c=function(){h.fillStyle="#000",h.fillRect(0,0,tt,et),h.translate(1,1)},_=function(){h.translate(-1,-1)},a=function(){this.actorSize=14,this.energizerSize=10,this.pointsEarnedTextSize=8,this.energizerColor="#FFF",this.pelletColor="#888",this.flashLevel=!1},l=function(){a.call(this,d,h),this.messageRow=21.7,this.pointsEarnedTextSize=12,this.backColor="#222",this.floorColor="#444",this.flashFloorColor="#999",this.name="Minimal"};l.prototype=f(a.prototype={setOverlayColor:function(t){this.overlayColor=t},beginMapClip:function(){d.save(),d.beginPath(),d.rect(-1,-1,225,289),d.clip()},endMapClip:function(){d.restore()},beginFrame:function(){this.setOverlayColor(void 0),d.save(),d.fillStyle="#000",d.fillRect(0,0,290,33),d.fillRect(0,32,32,290),d.fillRect(256,32,34,290),d.fillRect(0,320,290,34),d.translate(33,33)},endFrame:function(){d.restore(),null!=this.overlayColor&&(d.fillStyle=this.overlayColor,d.fillRect(0,0,290,354))},clearMapFrame:function(){d.fillStyle="#000",d.fillRect(-1,-1,227,291)},renderFunc:function(t,e){e?t.call(e,d):t(d)},drawNoGroutTile:function(t,e,i,n){var o=Ln.getTile(e,i);this.drawCenterTileSq(t,e,i,8,Ln.getTile(e+1,i)==o,Ln.getTile(e,i+1)==o,Ln.getTile(e+1,i+1)==o)},drawCenterTileSq:function(t,e,i,n,o,r,s){this.drawCenterPixelSq(t,8*e+q,8*i+O,n,o,r,s)},drawCenterPixelSq:function(t,e,i,n,o,r,s){t.fillRect(e-n/2,i-n/2,n,n);o&&t.fillRect(e-n/2,i-n/2,n+1,n),r&&t.fillRect(e-n/2,i-n/2,n,n+1)},toggleLevelFlash:function(){this.flashLevel=!this.flashLevel},setLevelFlash:function(t){t!=this.flashLevel&&(this.flashLevel=t,this.drawMap())},drawTargets:function(){var t;for(d.strokeStyle="rgba(255,255,255,0.5)",d.lineWidth="1.5",d.lineCap="round",d.lineJoin="round",t=0;t<5;t++)ze[t].isDrawTarget&&ze[t].drawTarget(d)},drawPaths:function(){var t,e=d.globalAlpha;for(d.globalAlpha=.7,t=0;t<5;t++)ze[t].isDrawPath&&this.drawPath(ze[t]);d.globalAlpha=e},drawPath:function(t){if(t.targetting){var e,i={x:t.tile.x,y:t.tile.y},n=t.targetTile,o={x:t.dir.x,y:t.dir.y},r=t.dirEnum;if(i.x!=n.x||i.y!=n.y){(0==r&&t.tilePixel.y<=O||2==r&&t.tilePixel.y>=O||1==r&&t.tilePixel.x<=q||3==r&t.tilePixel.x>=q)&&(i.x+=o.x,i.y+=o.y);var s,a={x:8*i.x+q,y:8*i.y+O},l=Math.abs(8*i.x+q-t.pixel.x+8*i.y+O-t.pixel.y),u=8*Le;if(d.strokeStyle=t.pathColor,d.lineWidth="2.0",d.lineCap="round",d.lineJoin="round",d.beginPath(),d.moveTo(t.pixel.x+t.pathCenter.x,t.pixel.y+t.pathCenter.y),d.lineTo(a.x+t.pathCenter.x,a.y+t.pathCenter.y),i.x==n.x&&i.y==n.y)s=t.getPathDistLeft(a,r);else for(;;){if(e=N(i,r),t!=ke&&Ln.constrainGhostTurns&&Ln.constrainGhostTurns(i,e,r),r=I(i,n,e),R(o,r),i.x+o.x==n.x&&i.y+o.y==n.y){s=t.getPathDistLeft(a,r),s=Math.min(u-l,s);break}if(u<l+8){s=u-l;break}i.x+=o.x,i.y+=o.y,a.x+=8*o.x,a.y+=8*o.y,l+=8,d.lineTo(8*i.x+q+t.pathCenter.x,8*i.y+O+t.pathCenter.y)}var f=a.x+t.pathCenter.x+s*o.x,h=a.y+t.pathCenter.y+s*o.y;d.lineTo(f,h);1==r||3==r?(d.lineTo(f-3*o.x,h+3*o.x),d.moveTo(f,h),d.lineTo(f-3*o.x,h-3*o.x)):(d.lineTo(f+3*o.y,h-3*o.y),d.moveTo(f,h),d.lineTo(f-3*o.y,h-3*o.y)),d.stroke()}}},erasePellet:function(t,e){h.translate(1,1),h.fillStyle=this.floorColor,this.drawNoGroutTile(h,t,e,8)," "==Ln.getTile(t+1,e)&&this.drawNoGroutTile(h,t+1,e,8)," "==Ln.getTile(t-1,e)&&this.drawNoGroutTile(h,t-1,e,8)," "==Ln.getTile(t,e+1)&&this.drawNoGroutTile(h,t,e+1,8)," "==Ln.getTile(t,e-1)&&this.drawNoGroutTile(h,t,e-1,8),h.translate(-1,-1)},drawMessage:function(t,e,i,n){d.font="8px ArcadeR",d.textBaseline="top",d.textAlign="right",d.fillStyle=e,i+=t.length,d.fillText(t,8*i,8*n)},drawReadyMessage:function(){this.drawMessage("READY ","#FF0",11,20),ce(d,131,163)},drawEatenPoints:function(){$.drawGhostPoints(d,ke.pixel.x,ke.pixel.y,Ti.getPoints())},drawActors:function(){var t;if(Ti.isActive()){for(t=0;t<4;t++)this.drawGhost(Ae[t]);Ti.showingPoints()?this.drawEatenPoints():this.drawPlayer()}else{for(this.drawPlayer(),t=3;0<=t;t--)Ae[t].isVisible&&this.drawGhost(Ae[t]);Me.isVisible&&!Pe.isVisible&&this.drawGhost(Pe,.5)}}},{drawMap:function(){var t,e,i;for(c(),h.fillStyle=this.flashLevel?this.flashFloorColor:this.floorColor,e=i=0;e<Ln.numRows;e++)for(t=0;t<Ln.numCols;t++)" "==Ln.currentTiles[i++]&&this.drawNoGroutTile(h,t,e,8);for(h.fillStyle=this.pelletColor,e=i=0;e<Ln.numRows;e++)for(t=0;t<Ln.numCols;t++)"."==Ln.currentTiles[i++]&&this.drawNoGroutTile(h,t,e,8);_()},refreshPellet:function(t,e){var i=Ln.posToIndex(t,e),n=Ln.currentTiles[i];" "==n?this.erasePellet(t,e):"."==n&&(h.fillStyle=this.pelletColor,this.drawNoGroutTile(h,t,e,8))},drawScore:function(){d.font="12px sans-serif",d.textBaseline="top",d.textAlign="left",d.fillStyle="#FFF",d.fillText(E(),8,16),d.font="bold 12px sans-serif",d.textBaseline="top",d.textAlign="center",d.fillText("high score",8*Ln.numCols/2,3),d.fillText(D(),8*Ln.numCols/2,16)},drawExtraLives:function(){var t;d.fillStyle="rgba(255,255,0,0.6)";for(t=0;t<C;t++)this.drawCenterPixelSq(d,8*(2*t+3),8*(Ln.numRows-2)+O,this.actorSize)},drawLevelIcons:function(){var t;d.fillStyle="rgba(255,255,255,0.5)";var e=this.actorSize;for(t=0;t<w;t++)d.fillRect(8*(Ln.numCols-2)-2*t*2,8*(Ln.numRows-2)+O-e/2,2,e)},drawEnergizers:function(){var t,e;for(d.fillStyle=this.energizerColor,e=0;e<Ln.numEnergizers;e++)t=Ln.energizers[e],"o"==Ln.currentTiles[t.x+t.y*Ln.numCols]&&this.drawCenterTileSq(d,t.x,t.y,this.energizerSize)},drawPlayer:function(t,e){null==t&&(t=1),null==e&&(e=1),d.fillStyle="rgba(255,255,0,"+e+")",this.drawCenterPixelSq(d,ke.pixel.x,ke.pixel.y,this.actorSize*t)},drawDyingPlayer:function(t){var e=85*t;e<=60?(t=e/60,this.drawPlayer(1-t)):(t=(e-=60)/15,this.drawPlayer(t,1-t))},drawGhost:function(t){if(t.mode!=ge){var e=t.color;t.scared?e=Ti.isFlash()?"#FFF":"#2121ff":t.mode!=be&&t.mode!=we||(e="rgba(255,255,255,0.3)"),d.fillStyle=e,this.drawCenterPixelSq(d,t.pixel.x,t.pixel.y,this.actorSize)}},drawFruit:function(){_i.isPresent()?(d.fillStyle="#0F0",this.drawCenterPixelSq(d,_i.pixel.x,_i.pixel.y,10)):_i.isScorePresent()&&(d.font=this.pointsEarnedTextSize+"px sans-serif",d.textBaseline="middle",d.textAlign="center",d.fillStyle="#FFF",d.fillText(_i.getPoints(),_i.pixel.x,_i.pixel.y))}});var u=function(t,e){a.call(this,t,e),this.messageRow=20,this.pelletSize=2,this.energizerSize=8,this.backColor="#000",this.floorColor="#000",this.flashWallColor="#FFF",this.name="Arcade"};u.prototype=f(a.prototype,{blitMap:function(){d.scale(1/e,1/e),d.drawImage(t,-1-1*e,-1-1*e),d.scale(e,e)},drawMap:function(t){if(c(),Ln){var e,i;for(wi!=rn&&(this.flashLevel=!1),i=r=0;i<Ln.numRows;i++)for(e=0;e<Ln.numCols;e++)"-"==Ln.currentTiles[r]&&"-"==Ln.currentTiles[r+1]&&(h.fillStyle="#ffb8de",h.fillRect(8*e,8*i+8-2,16,2)),r++;for(this.flashLevel?(h.fillStyle="#000",h.strokeStyle="#fff"):(h.fillStyle=Ln.wallFillColor,h.strokeStyle=Ln.wallStrokeColor),r=0;r<Ln.paths.length;r++){var n=Ln.paths[r];for(h.beginPath(),h.moveTo(n[0].x,n[0].y),s=1;s<n.length;s++)null!=n[s].cx?h.quadraticCurveTo(n[s].cx,n[s].cy,n[s].x,n[s].y):h.lineTo(n[s].x,n[s].y);h.quadraticCurveTo(n[s-1].x,n[0].y,n[0].x,n[0].y),h.fill(),h.stroke()}for(h.fillStyle=Ln.pelletColor,i=r=0;i<Ln.numRows;i++)for(e=0;e<Ln.numCols;e++)this.refreshPellet(e,i,!0);if(Ln.onDraw&&Ln.onDraw(h),Ln.shouldDrawMapOnly)return void _()}if(0<w){if(!t){h.fillStyle=ke.color,h.save(),h.translate(24,280),h.scale(.85,.85);var o=C==1/0?1:C;for(r=0;r<o;r++)te(h,0,0,3,1),h.translate(16,0);if(C==1/0){h.translate(-32,0);h.beginPath(),h.moveTo(-5,0),h.quadraticCurveTo(-5,-2,-3,-2),h.bezierCurveTo(-1,-2,1,2,3,2),h.quadraticCurveTo(5,2,5,0),h.quadraticCurveTo(5,-2,3,-2),h.bezierCurveTo(1,-2,-1,2,-3,2),h.quadraticCurveTo(-5,2,-5,0),h.lineWidth=1,h.strokeStyle="#FFF",h.stroke()}h.restore()}var r,s,a,l,u=_i.fruitHistory,f=Math.max(7,w);0!=m&&(f=Math.min(7,f));for(r=0,s=f-7+1;r<7&&s<=w;s++,r++)(a=u[s])&&(l=fe(a.name))&&(h.save(),h.translate(200-16*r*.85,280),h.scale(.85,.85),l(h,0,0),h.restore());t||(h.font=100<=w?"5px ArcadeR":"7px ArcadeR",h.textBaseline="middle",h.fillStyle="#777",h.textAlign="left",h.fillText(w,208,280))}_()},erasePellet:function(t,e,i){i||h.translate(1,1),h.fillStyle="#000";var n=Ln.posToIndex(t,e),o="o"==Ln.tiles[n]?this.energizerSize:this.pelletSize;this.drawCenterTileSq(h,t,e,o+2),i||h.translate(-1,-1)},refreshPellet:function(t,e,i){i||h.translate(1,1);var n=Ln.posToIndex(t,e),o=Ln.currentTiles[n];" "==o?this.erasePellet(t,e,i):"."==o?(h.fillStyle=Ln.pelletColor,h.translate(.5,.5),this.drawCenterTileSq(h,t,e,this.pelletSize),h.translate(-.5,-.5)):"o"==o&&(h.fillStyle="#FF1493",h.beginPath(),h.arc(8*t+q-1.25,8*e+O-.5,this.energizerSize/4,0,2*Math.PI),h.arc(8*t+q+2.25,8*e+O-.5,this.energizerSize/4,0,2*Math.PI),h.closePath(),h.fill(),h.beginPath(),h.moveTo(8*t+q-3.4,8*e+O),h.lineTo(8*t+q+.5,8*e+O+3.5),h.lineTo(8*t+q+4.4,8*e+O),h.fill()),i||h.translate(-1,-1)},drawScore:function(){d.font="8px ArcadeR",d.textBaseline="top",d.fillStyle="#FFF",d.textAlign="right",d.fillText("1UP",48,0),d.fillText("HIGH SCORE",152,0);var t=E();0==t&&(t="00");if(d.fillText(t,56,9),!v){var e=D();0==e&&(e="00"),d.fillText(e,136,9)}},drawGhost:function(_,t){var e;t&&(e=d.globalAlpha,d.globalAlpha=t);!function(t,e,i,n,o,r,s,a){if(t!=ge){var l=_.getAnimFrame(i),u=t==be||t==we,f=y(),h=_.getBounceY(e.x,e.y,a),c=_==Pe&&o?e.x+1:e.x;f(d,c,h,l,n,o,r,u,s)}}(_.mode,_.pixel,_.frames,_.faceDirEnum,_.scared,Ti.isFlash(),_.color,_.dirEnum),t&&(d.globalAlpha=e)},drawPlayer:function(){ke.getAnimFrame();ke.invincible&&(d.globalAlpha=.6);var t,e,i,n;t=ke.pixel,e=ke.dirEnum,i=ke.steps,n=ke.getAnimFrame(ke.getStepFrame(i)),g()(d,t.x,t.y,e,n,!0),ke.invincible&&(d.globalAlpha=1)},drawDyingPlayer:function(t){var e=ke.getAnimFrame(),i=5*Math.PI,n=Math.PI/4/i,o=Math.floor(t/n)*n*i;te(d,ke.pixel.x,ke.pixel.y,ke.dirEnum,e,o)},drawExplodingPlayer:function(t){ke.getAnimFrame();$t(d,ke.pixel.x,ke.pixel.y,ke.dirEnum,0,0,t,-3,1-t)},drawFruit:function(){if(_i.getCurrentFruit()){var t=_i.getCurrentFruit().name;_i.isPresent()?$.drawFruitSprite(d,_i.pixel.x,_i.pixel.y,t):_i.isScorePresent()&&$.drawMsPacFruitPoints(d,_i.pixel.x,_i.pixel.y,_i.getPoints())}}}),K=[new l,new u],j=K[1]},nt=(Z=!(G.prototype.onDotEat=function(t,e){this.dotsEaten++;var i=this.posToIndex(t,e);this.currentTiles[i]=" ",j.erasePellet(t,e)}),{update:function(){var t=this.isValidState();t!=Z&&((Z=t)?jt.onHudEnable():jt.onHudDisable())},draw:function(t){jt.draw(t)},isValidState:function(){return wi==tn||wi==Qi||wi==Zi||wi==$i||wi==rn||wi==on||wi==sn}}),ot=function(t){for(var e=X,i=0,n=0;"BODY"!=e.tagName;)i+=e.offsetTop,n+=e.offsetLeft,e=e.offsetParent;var o=t.pageX-n,r=t.pageY-i;return o/=Q/1,r/=Q/1,{x:o-=32,y:r-=32}},rt=function(t,e,i,n,o){this.x=t,this.y=e,this.w=i,this.h=n,this.onclick=o,this.pad=8,this.frame=0,this.borderBlurColor="#333",this.borderFocusColor="#EEE",this.isSelected=!1,this.startedInside=!1;var r=this,s=function(t){if(t.preventDefault(),1==t.touches.length){var e=ot(t.touches[0]);(r.startedInside=r.contains(e.x,e.y))?r.focus():r.blur()}else u(t)},a=function(t){if(t.preventDefault(),1==t.touches.length){if(r.startedInside){var e=ot(t.touches[0]);r.contains(e.x,e.y)?r.focus():r.blur()}}else u(t)},l=function(t){t.preventDefault();var e=r.startedInside&&r.isSelected;e&&r.click(),u(t),e&&r.focus()},u=function(t){t.preventDefault(),this.startedInside=!1,r.blur()},f=function(t){var e=ot(t);r.contains(e.x,e.y)&&r.click()},h=function(t){var e=ot(t);r.contains(e.x,e.y)?r.focus():r.blur()},c=function(t){r.blur()};this.isEnabled=!1,this.onEnable=function(){X.addEventListener("click",f),X.addEventListener("mousemove",h),X.addEventListener("mouseleave",c),X.addEventListener("touchstart",s),X.addEventListener("touchmove",a),X.addEventListener("touchend",l),X.addEventListener("touchcancel",u),this.isEnabled=!0},this.onDisable=function(){X.removeEventListener("click",f),X.removeEventListener("mousemove",h),X.removeEventListener("mouseleave",c),X.removeEventListener("touchstart",s),X.removeEventListener("touchmove",a),X.removeEventListener("touchend",l),X.removeEventListener("touchcancel",u),r.blur(),this.isEnabled=!1}},st=function(t,e,i,n,o,r){var s=this;this.isOn=o,this.setOn=r,rt.call(this,t,e,i,n,function(){r(!o()),s.refreshMsg()})};st.prototype=f(rt.prototype={contains:function(t,e){return t>=this.x&&t<=this.x+this.w&&e>=this.y&&e<=this.y+this.h},click:function(){clearTimeout(this.clickTimeout);var t=this;t.onclick&&(this.clickTimeout=setTimeout(function(){t.onclick()},200))},enable:function(){this.frame=0,this.onEnable()},disable:function(){this.onDisable()},focus:function(){this.isSelected=!0,this.onfocus&&this.onfocus()},blur:function(){this.isSelected=!1,this.onblur&&this.onblur()},setText:function(t){this.msg=t},setFont:function(t,e){this.font=t,this.fontcolor=e},setIcon:function(t){this.drawIcon=t},draw:function(t){t.lineWidth=2,t.beginPath();var e=this.x,i=this.y,n=this.w,o=this.h,r=o/4;t.moveTo(e,i+r),t.quadraticCurveTo(e,i,e+r,i),t.lineTo(e+n-r,i),t.quadraticCurveTo(e+n,i,e+n,i+r),t.lineTo(e+n,i+o-r),t.quadraticCurveTo(e+n,i+o,e+n-r,i+o),t.lineTo(e+r,i+o),t.quadraticCurveTo(e,i+o,e,i+o-r),t.closePath(),t.fillStyle="rgba(0,0,0,0.5)",t.fill(),t.strokeStyle=this.isSelected&&this.onclick?this.borderFocusColor:this.borderBlurColor,t.stroke(),this.drawIcon&&(this.msg?this.drawIcon(t,this.x+this.pad+8,this.y+this.h/2,this.frame):this.drawIcon(t,this.x+this.w/2,this.y+this.h/2,this.frame)),this.msg&&(t.font=this.font,t.fillStyle=this.isSelected&&this.onclick?this.fontcolor:"#777",t.textBaseline="middle",t.textAlign="center",t.fillText(this.msg,this.x+this.w/2,this.y+this.h/2+1))},update:function(){this.drawIcon&&(this.frame=this.isSelected?this.frame+1:0)}},{enable:function(){rt.prototype.enable.call(this),this.refreshMsg()},setToggleLabel:function(t){this.label=t},refreshMsg:function(){this.label&&(this.msg=this.label+": "+(this.isOn()?"ON":"OFF"))},refreshOnState:function(){this.setOn(this.isOn())}});var at=function(t,e,i,n,o,r,s,a){this.title=t,this.x=e,this.y=i,this.w=n,this.h=o,this.pad=r,this.buttons=[],this.buttonCount=0,this.currentY=this.y+this.pad,t&&(this.currentY+=1*(this.h+this.pad)),this.font=s,this.fontcolor=a,this.enabled=!1,this.backButton=void 0};at.prototype={clickCurrentOption:function(){var t;for(t=0;t<this.buttonCount;t++)if(this.buttons[t].isSelected){this.buttons[t].onclick();break}},selectNextOption:function(){var t,e;for(t=0;t<this.buttonCount;t++)if(this.buttons[t].isSelected){this.buttons[t].blur(),e=this.buttons[(t+1)%this.buttonCount];break}(e=e||this.buttons[0]).focus()},selectPrevOption:function(){var t,e;for(t=0;t<this.buttonCount;t++)if(this.buttons[t].isSelected){this.buttons[t].blur(),e=this.buttons[0==t?this.buttonCount-1:t-1];break}(e=e||this.buttons[this.buttonCount-1]).focus()},addToggleButton:function(t,e){var i=new st(this.x+this.pad,this.currentY,this.w-2*this.pad,this.h,t,e);this.buttons.push(i),this.buttonCount++,this.currentY+=this.pad+this.h},addToggleTextButton:function(t,e,i){var n=new st(this.x+this.pad,this.currentY,this.w-2*this.pad,this.h,e,i);n.setFont(this.font,this.fontcolor),n.setToggleLabel(t),this.buttons.push(n),this.buttonCount++,this.currentY+=this.pad+this.h},addTextButton:function(t,e){var i=new rt(this.x+this.pad,this.currentY,this.w-2*this.pad,this.h,e);i.setFont(this.font,this.fontcolor),i.setText(t),this.buttons.push(i),this.buttonCount++,this.currentY+=this.pad+this.h},addTextIconButton:function(t,e,i){var n=new rt(this.x+this.pad,this.currentY,this.w-2*this.pad,this.h,e);n.setFont(this.font,this.fontcolor),n.setText(t),n.setIcon(i),this.buttons.push(n),this.buttonCount++,this.currentY+=this.pad+this.h},addIconButton:function(t,e){var i=new rt(this.x+this.pad,this.currentY,this.w-2*this.pad,this.h,e);i.setIcon(t),this.buttons.push(i),this.buttonCount++,this.currentY+=this.pad+this.h},addSpacer:function(t){null==t&&(t=1),this.currentY+=t*(this.pad+this.h)},enable:function(){var t;for(t=0;t<this.buttonCount;t++)this.buttons[t].enable();this.enabled=!0},disable:function(){var t;for(t=0;t<this.buttonCount;t++)this.buttons[t].disable();this.enabled=!1},isEnabled:function(){return this.enabled},draw:function(t){var e;for(this.title&&(t.font="8px ArcadeR",t.textBaseline="middle",t.textAlign="center",t.fillStyle="#FFF",t.fillText(this.title,this.x+this.w/2,this.y+this.pad+this.h/2)),e=0;e<this.buttonCount;e++)this.buttons[e].draw(t)},update:function(){var t;for(t=0;t<this.buttonCount;t++)this.buttons[t].update()}};var lt,ut,ft,ht,ct,_t,dt,vt,pt,mt,xt,Tt,yt,gt,bt,wt,Ct,St,Pt,Ft,Mt,Et,kt,Dt,zt,At,Lt,Rt,It,Nt,Bt,qt,Ot,Gt,Ht,Wt,Yt,Ut,Jt,Vt,Kt,jt=function(){var i=function(){return s},t=function(){i().enable()},n=new rt(89,et,48,24,function(){t()});n.setText("MENU"),n.setFont("8px ArcadeR","#FFF");var e=new at(void 0,16,40,194,24,8,"10px Dos437,courier","#fff");e.hidden={onclick:function(){e.disable()}},e.backButton=e.hidden,e.draw=function(t){Qn(t,w,this.x,this.y)};var o=new at("QUESTION?",16,40,194,24,8,"8px ArcadeR","#EEE");o.addTextButton("YES",function(){o.disable(),o.onConfirm()}),o.addTextButton("NO",function(){o.disable(),t()}),o.addTextButton("CANCEL",function(){o.disable(),t()}),o.backButton=o.buttons[o.buttonCount-1];var r=function(t,e){i().disable(),o.title=t,o.onConfirm=e,o.enable()},s=new at("PAUSED",16,40,194,24,8,"8px ArcadeR","#EEE");s.addTextButton("RESUME",function(){s.disable()}),s.addTextButton("QUIT",function(){r("QUIT GAME?",function(){Hi(Ji,60)})}),s.backButton=s.buttons[0];var a=[s,o,e],l=function(){var t,e,i=a.length;for(t=0;t<i;t++)if((e=a[t]).isEnabled())return e};return{onHudEnable:function(){n.enable()},onHudDisable:function(){n.disable()},update:function(){n.isEnabled&&n.update()},draw:function(t){var e=l();e?(t.fillStyle="rgba(0,0,0,0.9)",t.fillRect(-2,-2,227,291),e.draw(t)):n.draw(t)},isOpen:function(){return null!=l()},getMenu:function(){return l()},getBossMenu:function(){return e},getMenuButton:function(){return n}}}(),Qt=(ft=function(t){t.save(),t.translate(.5,0),t.moveTo(0,6),t.quadraticCurveTo(1.5,0,6.5,0),t.quadraticCurveTo(11.5,0,13,6),t.restore()},lt=[13,13,11,11,9,13,8,13,8,11,5,11,5,13,4,13,2,11,0,13],ht=function(t){var e;for(t.save(),t.translate(.5,.5),e=0;e<lt.length;e+=2)t.lineTo(lt[e],lt[e+1]);t.restore()},ut=[13,12,12,13,11,13,9,11,7,13,6,13,4,11,2,13,1,13,0,12],ct=function(t){var e;for(t.save(),t.translate(.5,.5),e=0;e<ut.length;e+=2)t.lineTo(ut[e],ut[e+1]);t.restore()},function(t,e,n,o,r,s,a,l,u){t.save(),t.translate(e-7,n-7),s&&(u=a?"#FFF":"#2121ff"),l||(t.beginPath(),ft(t),0==o?ht(t):ct(t),t.closePath(),t.lineJoin="round",t.lineCap="round",t.lineWidth=.5,t.strokeStyle=u,t.stroke(),t.lineWidth=1,t.fillStyle=u,t.fill()),l&&(t.beginPath(),t.strokeStyle="black",t.fillStyle="yellow",t.moveTo(8,0),t.lineTo(13,0),t.lineTo(10,6),t.lineTo(15,6),t.lineTo(6,17),t.lineTo(9,9),t.lineTo(5,9),t.closePath(),t.stroke(),t.fill()),s?function(t,e){t.strokeStyle=t.fillStyle=e?"#F00":"#FF0",t.fillRect(4,5,2,2),t.fillRect(8,5,2,2);var n=[1,10,2,9,3,9,4,10,5,10,6,9,7,9,8,10,9,10,10,9,11,9,12,10];for(t.translate(.5,.5),t.beginPath(),t.moveTo(n[0],n[1]),i=2;i<n.length;i+=2)t.lineTo(n[i],n[i+1]);t.lineWidth=1,t.stroke(),t.translate(-.5,-.5)}(t,a):function(t,e){var i;t.save(),t.translate(2,3);var n=[0,1,1,0,2,0,3,1,3,3,2,4,1,4,0,3],o=function(){for(t.translate(.5,.5),t.beginPath(),t.moveTo(n[0],n[1]),i=2;i<n.length;i+=2)t.lineTo(n[i],n[i+1]);t.closePath(),t.fill(),t.lineJoin="round",t.stroke(),t.translate(-.5,-.5)};1==e?t.translate(-1,0):3==e?t.translate(1,0):0==e?t.translate(0,-1):2==e&&t.translate(0,1),t.fillStyle="#FFF",t.strokeStyle="#FFF",t.lineWidth=1,t.lineJoin="round",o(),t.translate(6,0),o(),1==e?t.translate(0,2):3==e?t.translate(2,2):0==e?t.translate(1,0):2==e&&t.translate(1,3),t.fillStyle="#00F",t.fillRect(0,0,2,2),t.translate(-6,0),t.fillRect(0,0,2,2),t.restore()}(t,r),t.restore()}),Xt=(vt=function(t,e){var i,n=t.length;for(_t.beginPath(),_t.moveTo(t[0],t[1]),i=2;i<n;i+=2)_t.lineTo(t[i],t[i+1]);_t.closePath(),_t.lineWidth=1,_t.lineCap=_t.lineJoin="round",_t.strokeStyle=e,_t.stroke()},pt=function(t,e){var i,n=t.length;for(_t.beginPath(),_t.moveTo(t[0],t[1]),i=2;i<n;i+=2)_t.lineTo(t[i],t[i+1]);_t.lineWidth=1,_t.lineCap=_t.lineJoin="round",_t.strokeStyle=e,_t.stroke()},mt=function(t,e){_t.save(),_t.translate(t,e),vt([1,0,2,0,3,1,3,5,2,6,1,6,0,5,0,1],dt),_t.restore()},xt=function(t,e){_t.save(),_t.translate(t,e),pt([0,1,1,0,1,6,0,6,2,6],dt),_t.restore()},Tt=function(t,e){_t.save(),_t.translate(t,e),pt([0,2,0,1,1,0,3,0,4,1,4,2,0,6,4,6],dt),_t.restore()},yt=function(t,e){_t.save(),_t.translate(t,e),pt([0,0,4,0,2,2,4,4,4,5,3,6,1,6,0,5],dt),_t.restore()},gt=function(t,e){_t.save(),_t.translate(t,e),pt([4,0,0,0,0,2,3,2,4,3,4,5,3,6,1,6,0,5],dt),_t.restore()},bt=function(){xt(-5,-3),mt(-1,-3),mt(4,-3)},wt=function(){Tt(-7,-3),mt(-1,-3),mt(4,-3)},Ct=function(){yt(-7,-3),mt(-1,-3),mt(4,-3)},St=function(){var t,e;t=-7,e=-3,_t.save(),_t.translate(t,e),pt([3,6,3,0,0,3,0,4,4,4],dt),_t.restore(),mt(-1,-3),mt(4,-3)},Pt=function(){gt(-7,-3),mt(-1,-3),mt(4,-3)},Ft=function(){var t,e;t=-7,e=-3,_t.save(),_t.translate(t,e),pt([0,1,0,0,4,0,4,1,2,4,2,6],dt),_t.restore(),mt(-1,-3),mt(4,-3)},Mt=function(){var t,e;t=-7,e=-3,_t.save(),_t.translate(t,e),vt([1,0,3,0,4,1,4,2,3,3,1,3,0,4,0,5,1,6,3,6,4,5,4,4,3,3,1,3,0,2,0,1],dt),_t.restore(),mt(-1,-3),mt(4,-3)},Et=function(){xt(-8,-3),mt(-4,-3),mt(1,-3),mt(6,-3)},kt=function(){var t,e,i,n;pt([t=-7,e=-3,t,e+6],dt),i=-5,n=-3,_t.save(),_t.translate(i,n),pt([3,0,1,0,0,1,0,5,1,6,2,6,3,5,3,3,0,3],dt),_t.restore(),mt(0,-3),mt(5,-3)},Dt=function(){Tt(-10,-3),mt(-4,-3),mt(1,-3),mt(6,-3)},zt=function(){yt(-10,-3),mt(-4,-3),mt(1,-3),mt(6,-3)},At=function(){gt(-10,-3),mt(-4,-3),mt(1,-3),mt(6,-3)},function(t,e,i,n,o){dt=o,(_t=t).save(),_t.translate(e+.5,i+.5),_t.translate(0,-1);var r={100:bt,200:wt,300:Ct,400:St,500:Pt,700:Ft,800:Mt,1e3:Et,1600:kt,2e3:Dt,3e3:zt,5e3:At}[n];r&&r(),_t.restore()}),Zt=(Rt="#fff",It=function(t,e){var i,n=t.length;for(Lt.beginPath(),Lt.moveTo(t[0],t[1]),i=2;i<n;i+=2)Lt.lineTo(t[i],t[i+1]);Lt.lineWidth=1,Lt.lineCap=Lt.lineJoin="round",Lt.strokeStyle=e,Lt.stroke()},Nt=function(t,e){Lt.save(),Lt.translate(t,e),function(t,e){var i,n=t.length;for(Lt.beginPath(),Lt.moveTo(t[0],t[1]),i=2;i<n;i+=2)Lt.lineTo(t[i],t[i+1]);Lt.closePath(),Lt.lineWidth=1,Lt.lineCap=Lt.lineJoin="round",Lt.strokeStyle=e,Lt.stroke()}([0,0,2,0,2,4,0,4],Rt),Lt.restore()},Bt=function(t,e){Lt.save(),Lt.translate(t,e),It([1,0,1,4],Rt),Lt.restore()},qt=function(t,e){Lt.save(),Lt.translate(t,e),It([0,0,2,0,2,2,0,2,0,4,2,4],Rt),Lt.restore()},Ot=function(t,e){Lt.save(),Lt.translate(t,e),It([2,0,0,0,0,2,2,2,2,4,0,4],Rt),Lt.restore()},Gt=function(){Bt(-5,-5),Nt(-1,-2),Nt(3,1)},Ht=function(){var t,e;e=t=-5,Lt.save(),Lt.translate(t,e),It([-4,2,-1,2],Rt),Lt.restore(),Bt(-5,-5),Nt(-1,-2),Nt(3,1)},Wt=function(){qt(-5,-5),Nt(-1,-2),Nt(3,1)},Yt=function(){Ot(-5,-5),Nt(-1,-2),Nt(3,1)},Ut=function(){var t,e;e=t=-5,Lt.save(),Lt.translate(t,e),It([0,0,2,0,2,4],Rt),Lt.restore(),Nt(-1,-2),Nt(3,1)},Jt=function(){Bt(-7,-7),Nt(-3,-4),Nt(1,-1),Nt(5,2)},Vt=function(){qt(-7,-7),Nt(-3,-4),Nt(1,-1),Nt(5,2)},Kt=function(){Ot(-7,-7),Nt(-3,-4),Nt(1,-1),Nt(5,2)},function(t,e,i,n){(Lt=t).save(),Lt.translate(e+.5,i+.5);var o={100:Gt,200:Wt,500:Yt,700:Ut,1e3:Jt,2e3:Vt,5e3:Kt,"-100":Ht}[n];o&&o(),Lt.restore()}),$t=function(t,e,i,n,o,r,s,a,l,u,f){null==r&&(r=0),null==a&&(a=0),null==s&&(s=1),null==l&&(l=1),null==u&&(u="rgba(255,255,0,"+l+")"),t.save(),t.translate(e,i),t.scale(s,s),f&&t.rotate(f);var h=Math.PI/2;0==n?t.rotate(3*h):3==n?t.rotate(0):2==n?t.rotate(h):1==n&&t.rotate(2*h),t.beginPath(),t.moveTo(-3+r,0),t.arc(a,0,6.5,o,2*Math.PI-o),t.closePath(),t.fillStyle=u,t.fill(),t.restore()},te=function(t,e,i,n,o,r){var s=0;0==o?$t(t,e,i,n,0,void 0,void 0,void 0,void 0,void 0,r):1==o?(s=Math.atan(.8),$t(t,e,i,n,s,void 0,void 0,void 0,void 0,void 0,r),s=Math.atan(.5)):2==o&&(s=Math.atan(2),$t(t,e,i,n,s,void 0,void 0,void 0,void 0,void 0,r),s=Math.atan(1)),t.save(),t.translate(e,i),r&&t.rotate(r);var a=Math.PI/2;0==n?t.rotate(-a):2==n?t.rotate(a):1==n&&t.scale(-1,1);e=-7.5,i=-7.5;if(t.fillStyle="#F00",t.beginPath(),t.arc(e+1,i+4,1.25,0,2*Math.PI),t.closePath(),t.fill(),t.beginPath(),t.arc(e+2,i+5,1.25,0,2*Math.PI),t.closePath(),t.fill(),t.beginPath(),t.arc(e+3,i+3,1.25,0,2*Math.PI),t.closePath(),t.fill(),t.beginPath(),t.arc(e+4,i+1,1.25,0,2*Math.PI),t.closePath(),t.fill(),t.beginPath(),t.arc(e+5,i+2,1.25,0,2*Math.PI),t.closePath(),t.fill(),t.fillStyle="#0031FF",t.beginPath(),t.arc(e+2.5,i+3.5,.5,0,2*Math.PI),t.closePath(),t.fill(),t.beginPath(),t.arc(e+3.5,i+2.5,.5,0,2*Math.PI),t.closePath(),t.fill(),t.strokeStyle="#F00",t.lineWidth=1.25,t.lineCap="round",t.beginPath(),0==o)t.moveTo(5,0),t.lineTo(6.5,0),t.moveTo(6.5,-1.5),t.lineTo(6.5,1.5);else{var l=7.5,u=8.5,f=Math.cos(s),h=Math.sin(s);t.moveTo(l*f-3,l*h),t.lineTo(u*f-3,u*h),t.moveTo(l*f-3,-l*h),t.lineTo(u*f-3,-u*h)}if(t.stroke(),t.beginPath(),t.arc(-3,2,.5,0,2*Math.PI),t.fillStyle="#000",t.fill(),t.strokeStyle="#000",t.lineCap="round",t.beginPath(),0==o)t.moveTo(-2.5,-2),t.lineTo(-.5,-2);else{l=.5,u=2.5,f=Math.cos(s),h=Math.sin(s);t.moveTo(l*f-3,-2-l*h),t.lineTo(u*f-3,-2-u*h)}t.stroke(),t.restore()},ee=function(i,t,e){var n=function(t,e){i.save(),i.translate(t,e),i.beginPath(),i.arc(2.5,2.5,3,0,2*Math.PI),i.lineWidth=1,i.strokeStyle="#000",i.stroke(),i.fillStyle="#ff0000",i.fill(),i.lineCap="round",i.beginPath(),i.moveTo(1,3),i.lineTo(2,4),i.strokeStyle="#fff",i.stroke(),i.restore()};i.save(),i.translate(t,e),n(-6,-1),n(-1,1),i.beginPath(),i.moveTo(-3,0),i.bezierCurveTo(-1,-2,2,-4,5,-5),i.lineTo(5,-4),i.bezierCurveTo(3,-4,1,0,1,2),i.strokeStyle="#ff9900",i.lineJoin="round",i.lineCap="round",i.stroke(),i.restore()},ie=function(t,e,i){t.save(),t.translate(e,i),t.beginPath(),t.moveTo(-1,-4),t.bezierCurveTo(-3,-4,-5,-3,-5,-1),t.bezierCurveTo(-5,3,-2,5,0,6),t.bezierCurveTo(3,5,5,2,5,0),t.bezierCurveTo(5,-3,3,-4,0,-4),t.fillStyle="#f00",t.fill(),t.strokeStyle="#f00",t.stroke();var n,o,r=[{x:-4,y:-1},{x:-3,y:2},{x:-2,y:0},{x:-1,y:4},{x:0,y:2},{x:0,y:0},{x:2,y:4},{x:2,y:-1},{x:3,y:1},{x:4,y:-2}];for(t.fillStyle="#fff",n=0,o=r.length;n<o;n++){var s=r[n];t.beginPath(),t.arc(s.x,s.y,.75,0,2*Math.PI),t.fill()}t.beginPath(),t.moveTo(0,-4),t.lineTo(-3,-4),t.lineTo(0,-4),t.lineTo(-2,-3),t.lineTo(-1,-3),t.lineTo(0,-4),t.lineTo(0,-2),t.lineTo(0,-4),t.lineTo(1,-3),t.lineTo(2,-3),t.lineTo(0,-4),t.lineTo(3,-4),t.closePath(),t.strokeStyle="#00ff00",t.lineCap="round",t.lineJoin="round",t.stroke(),t.beginPath(),t.moveTo(0,-4),t.lineTo(0,-5),t.lineCap="round",t.strokeStyle="#fff",t.stroke(),t.restore()},ne=function(t,e,i){t.save(),t.translate(e,i),t.beginPath(),t.moveTo(-2,-2),t.bezierCurveTo(-3,-2,-5,-1,-5,1),t.bezierCurveTo(-5,4,-3,6,0,6),t.bezierCurveTo(3,6,5,4,5,1),t.bezierCurveTo(5,-1,3,-2,2,-2),t.closePath(),t.fillStyle="#ffcc33",t.fill(),t.strokeStyle="#ffcc33",t.stroke(),t.beginPath(),t.moveTo(-1,-1),t.quadraticCurveTo(-1,-2,-2,-2),t.quadraticCurveTo(-1,-2,-1,-4),t.quadraticCurveTo(-1,-2,0,-2),t.quadraticCurveTo(-1,-2,-1,-1),t.strokeStyle="#ff9900",t.lineJoin="round",t.stroke(),t.beginPath(),t.moveTo(-.5,-4),t.quadraticCurveTo(0,-5,1,-5),t.bezierCurveTo(2,-5,3,-4,4,-4),t.bezierCurveTo(3,-4,3,-3,2,-3),t.bezierCurveTo(1,-3,1,-4,-.5,-4),t.strokeStyle="#00ff00",t.lineCap="round",t.lineJoin="round",t.stroke(),t.fillStyle="#00ff00",t.fill(),t.restore()},oe=function(t,e,i){t.save(),t.translate(e,i),t.beginPath(),t.moveTo(-2,-3),t.bezierCurveTo(-2,-4,-3,-4,-4,-4),t.bezierCurveTo(-5,-4,-6,-3,-6,0),t.bezierCurveTo(-6,3,-4,6,-2.5,6),t.quadraticCurveTo(-1,6,-1,5),t.bezierCurveTo(-1,6,0,6,1,6),t.bezierCurveTo(3,6,5,3,5,0),t.bezierCurveTo(5,-3,3,-4,2,-4),t.quadraticCurveTo(0,-4,0,-3),t.closePath(),t.fillStyle="#ff0000",t.fill(),t.beginPath(),t.moveTo(-1,-3),t.quadraticCurveTo(-1,-5,0,-5),t.lineCap="round",t.strokeStyle="#ff9900",t.stroke(),t.beginPath(),t.moveTo(2,3),t.quadraticCurveTo(3,3,3,1),t.lineCap="round",t.strokeStyle="#fff",t.stroke(),t.restore()},re=function(t,e,i){t.save(),t.translate(e,i),t.beginPath(),t.arc(0,2,5.5,0,2*Math.PI),t.fillStyle="#7bf331",t.fill(),t.beginPath(),t.moveTo(0,-4),t.lineTo(0,-5),t.moveTo(2,-5),t.quadraticCurveTo(-3,-5,-3,-6),t.strokeStyle="#69b4af",t.lineCap="round",t.stroke();var n=[0,-2,-1,-1,-2,0,-3,1,-4,2,-3,3,-2,4,-1,5,-2,6,-3,-1,1,7,2,6,3,5,2,4,1,3,0,2,1,1,2,0,3,-1,3,1,4,2];for(t.fillStyle="#69b4af",o=0,r=n.length;o<r;o+=2){e=n[o],i=n[o+1];t.beginPath(),t.arc(e,i,.65,0,2*Math.PI),t.fill()}var o,r;n=[{x:0,y:-3},{x:-2,y:-1},{x:-4,y:1},{x:-3,y:3},{x:1,y:0},{x:-1,y:2},{x:-1,y:4},{x:3,y:2},{x:1,y:4}];for(t.fillStyle="#fff",o=0,r=n.length;o<r;o++){var s=n[o];t.beginPath(),t.arc(s.x,s.y,.65,0,2*Math.PI),t.fill()}t.restore()},se=function(t,e,i){t.save(),t.translate(e,i),t.beginPath(),t.moveTo(-1,-2),t.lineTo(-1,5),t.moveTo(0,6),t.quadraticCurveTo(1,6,1,3),t.moveTo(1,4),t.lineTo(2,4),t.moveTo(1,1),t.lineTo(1,-2),t.moveTo(1,0),t.lineTo(2,0),t.lineCap="round",t.strokeStyle="#fff",t.stroke(),t.beginPath(),t.moveTo(0,-6),t.quadraticCurveTo(-3,-6,-3,-4),t.lineTo(-3,-2),t.lineTo(3,-2),t.lineTo(3,-4),t.quadraticCurveTo(3,-6,0,-6),t.strokeStyle=t.fillStyle="#68b9fc",t.fill(),t.lineJoin="round",t.stroke(),t.beginPath(),t.moveTo(1,-5),t.lineTo(-1,-5),t.lineCap="round",t.strokeStyle="#000",t.stroke(),t.restore()},ae=function(t,e,i){t.save(),t.translate(e,i),t.beginPath(),t.moveTo(-2,-5),t.quadraticCurveTo(-4,-6,-6,-4),t.quadraticCurveTo(-7,-2,-5,1),t.quadraticCurveTo(-3,4,0,5),t.quadraticCurveTo(5,5,5,-1),t.quadraticCurveTo(6,-5,3,-5),t.quadraticCurveTo(1,-5,0,-2),t.quadraticCurveTo(-2,3,-5,5),t.moveTo(1,1),t.quadraticCurveTo(3,4,4,6),t.lineWidth=2,t.lineCap="round",t.strokeStyle="#ffcc33",t.stroke();var n,o,r=[-5,-6,1,-6,4,-4,-5,0,-2,0,6,1,-4,6,5,5];for(t.fillStyle="#fff",n=0,o=r.length;n<o;n+=2){e=r[n],i=r[n+1];t.beginPath(),t.arc(e,i,.65,0,2*Math.PI),t.fill()}t.restore()},le=function(t,e,i){t.save(),t.translate(e,i),t.beginPath(),t.moveTo(0,-4),t.bezierCurveTo(-1,-4,-2,-3,-2,-1),t.bezierCurveTo(-2,1,-4,2,-4,4),t.bezierCurveTo(-4,6,-2,7,0,7),t.bezierCurveTo(2,7,4,6,4,4),t.bezierCurveTo(4,2,2,1,2,-1),t.bezierCurveTo(2,-3,1,-4,0,-4),t.fillStyle=t.strokeStyle="#00ff00",t.stroke(),t.fill(),t.beginPath(),t.moveTo(-2,3),t.quadraticCurveTo(-2,5,-1,5),t.strokeStyle="#0033ff",t.lineCap="round",t.stroke(),t.beginPath(),t.moveTo(0,-4),t.quadraticCurveTo(0,-6,2,-6),t.strokeStyle="#fff",t.lineCap="round",t.stroke(),t.restore()},ue=function(t,e,i){t.save(),t.translate(e,i),t.beginPath(),t.moveTo(-5,5),t.quadraticCurveTo(-4,5,-2,6),t.bezierCurveTo(2,6,6,2,6,-4),t.lineTo(3,-3),t.lineTo(3,-2),t.lineTo(-4,5),t.closePath(),t.fillStyle=t.strokeStyle="#ffff00",t.stroke(),t.fill(),t.beginPath(),t.moveTo(4,-5),t.lineTo(5,-6),t.strokeStyle="#ffff00",t.lineCap="round",t.stroke(),t.beginPath(),t.moveTo(3,-1),t.lineTo(-2,4),t.strokeStyle="#000",t.lineCap="round",t.stroke(),t.beginPath(),t.moveTo(2,3),t.lineTo(0,5),t.strokeStyle="#fff",t.lineCap="round",t.stroke(),t.restore()},fe=function(t){return{cherry:ee,strawberry:ie,orange:ne,apple:oe,melon:re,key:se,banana:ue,monero:_e,bitcoin:de,ripple:ve,grin:pe,tari:me}[t]},he=function(t,e,i,n){t.save(),t.translate(e,i),t.beginPath(),t.moveTo(-7,3),t.lineTo(-5,3),t.bezierCurveTo(-6,0,-5,-3,-2,-3),t.bezierCurveTo(0,-3,2,-2,2,2),t.bezierCurveTo(3,-1,3,-2,5,-2),t.bezierCurveTo(6,-2,6,0,5,0),t.bezierCurveTo(4,1,4,3,2,3),t.closePath(),t.lineWidth=1,t.lineCap=t.lineJoin="round",t.fillStyle=t.strokeStyle=n,t.fill(),t.stroke(),t.beginPath(),t.moveTo(4,-2),t.lineTo(3,-5),t.moveTo(5,-1),t.lineTo(7,-5),t.stroke(),t.beginPath(),t.arc(3,-5,1,0,2*Math.PI),t.fill(),t.beginPath(),t.arc(7,-5,1,0,2*Math.PI),t.fill(),t.beginPath(),t.moveTo(-4,1),t.bezierCurveTo(-5,-1,-3,-3,-1,-2),t.bezierCurveTo(0,-1,0,0,-1,1),t.bezierCurveTo(-2,1,-3,0,-2,-.5),t.lineWidth=.5,t.strokeStyle="#000",t.stroke(),t.restore()},ce=function(t,e,i){t.save(),t.translate(e,i),t.lineWidth=.5,t.strokeStyle=t.fillStyle="#ff0",t.beginPath(),t.moveTo(-1,1),t.bezierCurveTo(-1,0,-1,-3,0,-3),t.lineTo(2,-3),t.bezierCurveTo(2,-2,0,0,-1,1),t.fill(),t.stroke(),t.beginPath(),t.arc(-2,3,.5,0,2*Math.PI),t.fill(),t.stroke(),t.restore()},_e=function(t,e,i){t.save(),t.translate(e-9,i-9),t.fillStyle="#ff6600",t.scale(8,8),t.lineWidth=.05,t.beginPath(),t.moveTo(1.12688,0),t.bezierCurveTo(.5049,-.002,5e-4,.5024,5e-4,1.12441),t.bezierCurveTo(5e-4,1.24873,.0207,1.36831,.0579,1.4802),t.lineTo(.39478,1.4802),t.lineTo(.39478,.53246),t.lineTo(1.12694,1.26463),t.lineTo(1.85908,.53246),t.lineTo(1.85908,1.48019),t.lineTo(2.19596,1.48019),t.bezierCurveTo(2.23316,1.3683,2.25336,1.24872,2.25336,1.1244),t.bezierCurveTo(2.25335,.50237,1.74895,-.002,1.12694,-.002),t.fill(),t.stroke(),t.fillStyle="#4c4c4c",t.lineWidth=.05,t.beginPath(),t.moveTo(.95853,1.43297),t.lineTo(.639,1.11343),t.lineTo(.639,1.70977),t.lineTo(.16438,1.70977),t.bezierCurveTo(.36212,2.03417,.7192299999999999,2.2508,1.12686,2.2508),t.bezierCurveTo(1.53449,2.2508,1.89164,2.03417,2.08935,1.7097699999999998),t.lineTo(1.61474,1.7097699999999998),t.lineTo(1.61474,1.11342),t.lineTo(1.29521,1.43295),t.lineTo(1.12687,1.60129),t.lineTo(.95854,1.43296),t.lineTo(.95853,1.43296),t.closePath(),t.fill(),t.stroke(),t.restore()},de=function(t,e,i){t.save(),t.translate(e-9,i-9),t.strokeStyle="rgba(0,0,0,0)",t.scale(.275,.275),t.miterLimit=4,t.translate(.00630876,-.00301984),t.fillStyle="#f7931a",t.beginPath(),t.moveTo(63.033,39.744),t.bezierCurveTo(58.759,56.887,41.396,67.32,24.251000000000005,63.045),t.bezierCurveTo(7.113000000000003,58.771,-3.3199999999999967,41.407,.9560000000000031,24.265),t.bezierCurveTo(5.228000000000003,7.120000000000001,22.591000000000005,-3.314,39.731,.9600000000000009),t.bezierCurveTo(56.875,5.234000000000001,67.307,22.6,63.033,39.744),t.closePath(),t.fill(),t.stroke(),t.fillStyle="#FFF",t.beginPath(),t.moveTo(46.103,27.444),t.bezierCurveTo(46.74,23.186,43.498000000000005,20.897,39.065,19.369999999999997),t.lineTo(40.503,13.601999999999997),t.lineTo(36.992,12.726999999999997),t.lineTo(35.592,18.342999999999996),t.bezierCurveTo(34.669,18.112999999999996,33.721,17.895999999999997,32.778999999999996,17.680999999999997),t.lineTo(34.18899999999999,12.027999999999999),t.lineTo(30.679999999999993,11.152999999999999),t.lineTo(29.240999999999993,16.918999999999997),t.bezierCurveTo(28.476999999999993,16.744999999999997,27.726999999999993,16.572999999999997,26.99899999999999,16.391999999999996),t.lineTo(27.002999999999993,16.373999999999995),t.lineTo(22.160999999999994,15.164999999999996),t.lineTo(21.226999999999993,18.914999999999996),t.bezierCurveTo(21.226999999999993,18.914999999999996,23.831999999999994,19.511999999999997,23.776999999999994,19.548999999999996),t.bezierCurveTo(25.198999999999995,19.903999999999996,25.455999999999992,20.844999999999995,25.412999999999993,21.590999999999994),t.lineTo(23.77499999999999,28.161999999999992),t.bezierCurveTo(23.87299999999999,28.18699999999999,23.999999999999993,28.222999999999992,24.13999999999999,28.278999999999993),t.bezierCurveTo(24.02299999999999,28.249999999999993,23.89799999999999,28.217999999999993,23.76899999999999,28.186999999999994),t.lineTo(21.472999999999992,37.391999999999996),t.bezierCurveTo(21.298999999999992,37.824,20.857999999999993,38.471999999999994,19.86399999999999,38.226),t.bezierCurveTo(19.89899999999999,38.277,17.31199999999999,37.589,17.31199999999999,37.589),t.lineTo(15.56899999999999,41.608),t.lineTo(20.13799999999999,42.747),t.bezierCurveTo(20.987999999999992,42.96,21.82099999999999,43.183,22.64099999999999,43.393),t.lineTo(21.18799999999999,49.227000000000004),t.lineTo(24.694999999999993,50.102000000000004),t.lineTo(26.133999999999993,44.330000000000005),t.bezierCurveTo(27.09199999999999,44.59,28.02199999999999,44.830000000000005,28.931999999999995,45.056000000000004),t.lineTo(27.497999999999994,50.801),t.lineTo(31.008999999999993,51.676),t.lineTo(32.461999999999996,45.853),t.bezierCurveTo(38.449,46.986000000000004,42.95099999999999,46.529,44.846,41.114000000000004),t.bezierCurveTo(46.373,36.754000000000005,44.769999999999996,34.239000000000004,41.62,32.599000000000004),t.bezierCurveTo(43.913999999999994,32.07,45.641999999999996,30.561000000000003,46.102999999999994,27.444000000000003),t.closePath(),t.moveTo(38.081,38.693),t.bezierCurveTo(36.996,43.053,29.655,40.696,27.275000000000006,40.105),t.lineTo(29.203000000000007,32.376),t.bezierCurveTo(31.583000000000006,32.97,39.215,34.146,38.081,38.693),t.closePath(),t.moveTo(39.167,27.381),t.bezierCurveTo(38.177,31.347,32.067,29.332,30.085,28.838),t.lineTo(31.833000000000002,21.828000000000003),t.bezierCurveTo(33.815000000000005,22.322000000000003,40.198,23.244000000000003,39.167,27.381000000000004),t.closePath(),t.fill(),t.stroke(),t.restore()},ve=function(t,e,i){t.save(),t.translate(e-10,i-12),t.scale(.12,.12);var n=t.createLinearGradient(50.5705,45.7015,159.0832,154.2141);n.addColorStop(0,"#11AAE2"),n.addColorStop(1,"#016197"),t.fillStyle=n,t.beginPath(),t.moveTo(137.9,117.2),t.bezierCurveTo(132.4,114,126.10000000000001,113.10000000000001,120,112.9),t.bezierCurveTo(114.8,112.7,107.1,109.4,107.1,100),t.bezierCurveTo(107.1,93,112.8,87.3,120,87.1),t.bezierCurveTo(126.2,86.89999999999999,132.4,86,137.9,82.8),t.bezierCurveTo(148,77,154.20000000000002,66.19999999999999,154.20000000000002,54.5),t.bezierCurveTo(154.20000000000002,42.8,148.00000000000003,32,137.9,26.2),t.bezierCurveTo(127.80000000000001,20.4,115.30000000000001,20.4,105.2,26.2),t.bezierCurveTo(95,31.9,88.8,42.7,88.8,54.4),t.bezierCurveTo(88.8,60.699999999999996,91.1,66.6,93.89999999999999,72),t.bezierCurveTo(96.3,76.5,97.49999999999999,85,89.19999999999999,89.8),t.bezierCurveTo(82.99999999999999,93.39999999999999,75.29999999999998,91.1,71.49999999999999,85),t.bezierCurveTo(68.29999999999998,79.8,64.29999999999998,74.9,58.79999999999998,71.8),t.bezierCurveTo(48.69999999999998,66,36.19999999999998,66,26.09999999999998,71.8),t.bezierCurveTo(16.1,77.5,9.9,88.3,9.9,100),t.bezierCurveTo(9.9,111.7,16.1,122.5,26.299999999999997,128.3),t.bezierCurveTo(36.4,134.10000000000002,48.9,134.10000000000002,59,128.3),t.bezierCurveTo(64.5,125.10000000000001,68.4,120.30000000000001,71.7,115.10000000000001),t.bezierCurveTo(74.4,110.80000000000001,81,105.4,89.4,110.2),t.bezierCurveTo(95.60000000000001,113.8,97.5,121.60000000000001,94,128),t.bezierCurveTo(91.1,133.4,88.9,139.2,88.9,145.6),t.bezierCurveTo(88.9,157.29999999999998,95.10000000000001,168.1,105.2,173.9),t.bezierCurveTo(115.3,179.70000000000002,127.80000000000001,179.70000000000002,137.9,173.9),t.bezierCurveTo(148,168.1,154.20000000000002,157.3,154.20000000000002,145.6),t.bezierCurveTo(154.2,133.9,148,123.1,137.9,117.2),t.closePath(),t.fill(),t.stroke(),t.restore()},pe=function(t,e,i){t.save(),t.translate(e-11,i-11),t.scale(.0965,.0965),t.fillStyle="rgb(254,241,2)",t.beginPath(),t.arc(121.8,122,85.25,0,2*Math.PI,!0),t.closePath(),t.fill("evenodd"),t.stroke(),t.translate(.2,-2),t.fillStyle="#000",t.strokeStyle="#000",t.beginPath(),t.moveTo(162,92),t.bezierCurveTo(159.966,87.434,158.071,78.413,152.855,76.407),t.bezierCurveTo(146.14,73.825,141.989,90.729,141,95),t.lineTo(140,95),t.bezierCurveTo(138.307,87.682,136.035,77.31,128,75),t.bezierCurveTo(124.28,90.624,131.886,107.479,139,121),t.bezierCurveTo(146.596,117.37,150.297,106.002,151,98),t.lineTo(152,98),t.lineTo(160,122),t.bezierCurveTo(166.436,120.15,168.675,113.781,170.999,108),t.bezierCurveTo(175.988,95.592,180.174,80.332,177,67),t.bezierCurveTo(167.395,69.72,164.473,83.455,162,92),t.moveTo(66,124),t.bezierCurveTo(74.595,119.896,78.685,106.906,80,98),t.lineTo(81,98),t.bezierCurveTo(82.017,102.293,84.736,113.368,90.1,114.079),t.bezierCurveTo(96.934,114.983,100.517,99.819,101,95),t.lineTo(102,95),t.bezierCurveTo(104.179,102.529,106.475,112.32,114,116),t.bezierCurveTo(116.776,104.34,113.452,91.905,109.188,81),t.bezierCurveTo(108.092,78.196,105.841,70.636,101.975,70.636),t.bezierCurveTo(95.641,70.636,92.08,87.332,91,92),t.lineTo(90,92),t.lineTo(82,68),t.bezierCurveTo(67.928,74.72,60.284,110.453,66,124),t.moveTo(51,136),t.bezierCurveTo(61.443,181.551,109.612,207.374,153,188.138),t.bezierCurveTo(168.791,181.137,181.317,168.663,188.539,153),t.bezierCurveTo(190.405,148.953,194.07,141.628,191.933,136.318),t.bezierCurveTo(189.805,131.029,169.166,139.671,164.009,141.928),t.bezierCurveTo(163.285,142.25,162.774,142.918,162.655,143.702),t.bezierCurveTo(162.655,143.702,162.655,143.702,162.655,143.702),t.bezierCurveTo(162.486,144.811,162.786,145.941,163.485,146.82),t.bezierCurveTo(164.183,147.699,165.216,148.247,166.335,148.333),t.bezierCurveTo(170.116,148.624,175,149,175,149),t.bezierCurveTo(159.313,179.365,116.899,192.791,87,168.532),t.bezierCurveTo(80.308,163.103,74.338,156.652,70.32,149),t.bezierCurveTo(68.377,145.3,66.575,140.568,63.272,138.029),t.bezierCurveTo(60.099,135.589,55.285,134.753,51,136),t.closePath(),t.fill("nonzero"),t.stroke(),t.restore()},me=function(t,e,i){t.save(),t.translate(e,i),t.strokeStyle="#9330ff",t.fillStyle="#9330ff",t.translate(-9,-9),t.scale(.065,.065),t.beginPath(),t.moveTo(115.88,0),t.lineTo(0,75.43),t.lineTo(0,154.23000000000002),t.lineTo(115.35,283.03000000000003),t.lineTo(278.94,154.7),t.lineTo(278.94,75.35),t.lineTo(115.88,0),t.closePath(),t.moveTo(118.18,31.86),t.lineTo(250.99,93.22999999999999),t.lineTo(250.99,127.39999999999999),t.lineTo(50.6,75.85),t.lineTo(118.18,31.86),t.closePath(),t.moveTo(129.45,125),t.lineTo(236.43,152.52),t.lineTo(129.45,236.45000000000002),t.lineTo(129.45,125),t.closePath(),t.moveTo(27.95,98.89),t.lineTo(101.5,117.81),t.lineTo(101.5,225.68),t.lineTo(27.950000000000003,143.55),t.lineTo(27.950000000000003,98.89),t.closePath(),t.fill(),t.stroke(),t.restore()},xe=function(){this.dir={},this.pixel={},this.tile={},this.tilePixel={},this.distToMid={},this.targetTile={},this.frames=0,this.steps=0,this.isDrawTarget=!1,this.isDrawPath=!1,this.savedSteps={},this.savedFrames={},this.savedDirEnum={},this.savedPixel={},this.savedTargetting={},this.savedTargetTile={}};xe.prototype.save=function(t){this.savedSteps[t]=this.steps,this.savedFrames[t]=this.frames,this.savedDirEnum[t]=this.dirEnum,this.savedPixel[t]={x:this.pixel.x,y:this.pixel.y},this.savedTargetting[t]=this.targetting,this.savedTargetTile[t]={x:this.targetTile.x,y:this.targetTile.y}},xe.prototype.load=function(t){this.steps=this.savedSteps[t],this.frames=this.savedFrames[t],this.setDir(this.savedDirEnum[t]),this.setPos(this.savedPixel[t].x,this.savedPixel[t].y),this.targetting=this.savedTargetting[t],this.targetTile.x=this.savedTargetTile[t].x,this.targetTile.y=this.savedTargetTile[t].y},xe.prototype.reset=function(){this.setDir(this.startDirEnum),this.setPos(this.startPixel.x,this.startPixel.y),this.frames=0,this.steps=0,this.targetting=!1},xe.prototype.setPos=function(t,e){this.pixel.x=t,this.pixel.y=e,this.commitPos()},xe.prototype.getTilePixel=function(t,e){return null==t&&(t=this.pixel),null==e&&(e={}),e.x=t.x%8,e.y=t.y%8,e.x<0&&(e.x+=8),e.y<0&&(e.y+=8),e},xe.prototype.commitPos=function(){Ln&&Ln.teleport(this),this.tile.x=Math.floor(this.pixel.x/8),this.tile.y=Math.floor(this.pixel.y/8),this.getTilePixel(this.pixel,this.tilePixel),this.distToMid.x=q-this.tilePixel.x,this.distToMid.y=O-this.tilePixel.y},xe.prototype.setDir=function(t){R(this.dir,t),this.dirEnum=t};xe.prototype.getStepSizeFromTable=function(t,e){var i;if(!(t<1))return 1==t?i=0:2<=t&&t<=4?i=1:5<=t&&t<=20?i=2:21<=t&&(i=3),"1111111111111111011111111111111111112111111121110110110101101101010101010101010111111111111111111111111121111111111121111111211111111111211111111111211112111121011011011011011101101010110101011111211111112111111121111211112111211121112111211111211112111121112111211121112101110111011101110110110101101101112111211121112111211211211211211111211111112111111121111211112100000000000000000000000000000000011011010110110111211121112111211121121121121121"[7*i*16+16*e+this.frames%16]},xe.prototype.update=function(t){this.getNumSteps()<=t||(this.steps+=this.step(),this.steer())};var Te,ye,ge=1,be=2,we=3,Ce=function(){xe.apply(this),this.randomScatter=!1,this.faceDirEnum=this.dirEnum};(Ce.prototype=f(xe.prototype)).getBounceY=(Te={0:[-4,-2,0,2,4,3,2,3],2:[3,5,7,5,4,5,7,8],1:[2,3,3,4,3,2,2,2],3:[2,2,3,4,3,3,2,2]},function(t,e,i){if(null==t&&(t=this.pixel.x),null==e&&(e=this.pixel.y),null==i&&(i=this.dirEnum),0!=this.mode||!this.scared||2!=m)return e;var n=this.getTilePixel({x:t,y:e}),o=8*Math.floor(e/8);return o+=0==i||2==i?Te[i][n.y]:Te[i][n.x]}),Ce.prototype.getAnimFrame=function(t){return null==t&&(t=this.frames),Math.floor(t/8)%2},Ce.prototype.reset=function(){this.sigReverse=!1,this.sigLeaveHome=!1,this.mode=this.startMode,this.scared=!1,o.ghostReset(),this.savedSigReverse={},this.savedSigLeaveHome={},this.savedMode={},this.savedScared={},this.savedElroy={},this.savedFaceDirEnum={},xe.prototype.reset.apply(this),this.faceDirEnum=this.dirEnum},Ce.prototype.save=function(t){this.savedSigReverse[t]=this.sigReverse,this.savedSigLeaveHome[t]=this.sigLeaveHome,this.savedMode[t]=this.mode,this.savedScared[t]=this.scared,this==Pe&&(this.savedElroy[t]=this.elroy),this.savedFaceDirEnum[t]=this.faceDirEnum,xe.prototype.save.call(this,t)},Ce.prototype.load=function(t){this.sigReverse=this.savedSigReverse[t],this.sigLeaveHome=this.savedSigLeaveHome[t],this.mode=this.savedMode[t],this.scared=this.savedScared[t],this==Pe&&(this.elroy=this.savedElroy[t]),this.faceDirEnum=this.savedFaceDirEnum[t],xe.prototype.load.call(this,t)},Ce.prototype.isSlowInTunnel=function(){return 1!=m&&3!=m&&2!=m||w<=3},Ce.prototype.getNumSteps=function(){var t=1;return this.mode==be||this.mode==we?2:5==this.mode||4==this.mode?this.getStepSizeFromTable(1,4):(Ln.isTunnelTile(this.tile.x,this.tile.y)&&this.isSlowInTunnel()?t=4:this.scared?t=3:1==this.elroy?t=5:2==this.elroy&&(t=6),this.getStepSizeFromTable(w||1,t))},Ce.prototype.reverse=function(){this.sigReverse=!0},Ce.prototype.goHome=function(){o.silence(),o.eatingGhost.play(),this.mode=ge},Ce.prototype.leaveHome=function(){this.playSounds(),this.sigLeaveHome=!0},Ce.prototype.playSounds=function(){for(var t=0,e=0,i=0;i<4;i++)0==Ae[i].mode&&t++,Ae[i].mode==be&&e++;if(0<e)return o.ghostNormalMove.stopLoop(),void o.ghostReturnToHome.startLoop(!0);o.ghostReturnToHome.stopLoop(),0<t?this.scared||o.ghostNormalMove.startLoop(!0):o.ghostNormalMove.stopLoop()},Ce.prototype.onEnergized=function(){this.reverse(),this.mode!=be&&this.mode!=we&&(this.scared=!0,this.targetting=void 0)},Ce.prototype.onEaten=function(){this.goHome(),this.scared=!1},Ce.prototype.step=function(){return this.setPos(this.pixel.x+this.dir.x,this.pixel.y+this.dir.y),1},Ce.prototype.homeSteer=((ye={})[be]=function(){this.tile.x==Ln.doorTile.x&&this.tile.y==Ln.doorTile.y&&(this.faceDirEnum=2,this.targetting=!1,this.pixel.x==Ln.doorPixel.x?(this.mode=we,this.playSounds(),this.setDir(2)):this.setDir(3),this.faceDirEnum=this.dirEnum)},ye[we]=function(){this.pixel.y==Ln.homeBottomPixel&&(this.pixel.x==this.startPixel.x?(this.setDir(0),this.mode=this.arriveHomeMode):this.setDir(this.startPixel.x<this.pixel.x?1:3),this.faceDirEnum=this.dirEnum)},ye[4]=function(){this.sigLeaveHome?(this.sigLeaveHome=!1,this.mode=5,this.pixel.x==Ln.doorPixel.x?this.setDir(0):this.setDir(this.pixel.x<Ln.doorPixel.x?3:1)):this.pixel.y==Ln.homeTopPixel?this.setDir(2):this.pixel.y==Ln.homeBottomPixel&&this.setDir(0),this.faceDirEnum=this.dirEnum},ye[5]=function(){this.pixel.x==Ln.doorPixel.x&&(this.pixel.y==Ln.doorPixel.y?(this.mode=0,this.setDir(1)):this.setDir(0),this.faceDirEnum=this.dirEnum)},function(){var t=ye[this.mode];t&&t.apply(this)}),Ce.prototype.isScatterBrain=function(){var t=!1;return pi.getCommand()==vi&&(1==m||2==m?t=this==Pe||this==Fe:3==m&&(t=!0)),t},Ce.prototype.steer=function(){var t,e,i,n=L(this.dirEnum);if(this.homeSteer(),n=L(this.dirEnum),0==this.mode||this.mode==be){if(0==this.distToMid.x&&0==this.distToMid.y)this.sigReverse&&(this.faceDirEnum=n,this.sigReverse=!1),this.setDir(this.faceDirEnum);else if(3==this.dirEnum&&this.tilePixel.x==q+1||1==this.dirEnum&&this.tilePixel.x==q-1||0==this.dirEnum&&this.tilePixel.y==O-1||2==this.dirEnum&&this.tilePixel.y==O+1){var o={x:this.tile.x+this.dir.x,y:this.tile.y+this.dir.y};if(e=N(o,this.dirEnum),this.scared){for(t=Math.floor(4*Math.random());!e[t];)t=(t+1)%4;this.targetting=!1}else{this.mode==be?(this.targetTile.x=Ln.doorTile.x,this.targetTile.y=Ln.doorTile.y):this.elroy||pi.getCommand()!=vi?this.setTarget():(i=this.isScatterBrain()?ze[Math.floor(4*Math.random())]:this,this.targetTile.x=i.cornerTile.x,this.targetTile.y=i.cornerTile.y,this.targetting="corner");var r=!1;if(this.mode==be&&Ln.getExitDir){var s=Ln.getExitDir(o.x,o.y);null!=s&&s!=n&&(r=!0,t=s)}r||(this.mode!=be&&Ln.constrainGhostTurns&&Ln.constrainGhostTurns(o,e,this.dirEnum),t=I(o,this.targetTile,e))}this.faceDirEnum=t}}else this.targetting=!1},Ce.prototype.getPathDistLeft=function(t,e){var i=8,n=this.getTargetPixel();return"pacman"==this.targetting&&(i=0==e||2==e?Math.abs(t.y-n.y):Math.abs(t.x-n.x)),i},Ce.prototype.setTarget=function(){this.targetTile=this.getTargetTile(),this!=Ee&&(this.targetting="pacman")};var Se=function(){xe.apply(this),1!=m&&2!=m||(this.frames=1),this.nextDir={},this.lastMeal={x:-1,y:-1},this.ai=!1,this.invincible=!1,this.savedNextDirEnum={},this.savedStopped={},this.savedEatPauseFramesLeft={}};(Se.prototype=f(xe.prototype)).save=function(t){this.savedEatPauseFramesLeft[t]=this.eatPauseFramesLeft,this.savedNextDirEnum[t]=this.nextDirEnum,this.savedStopped[t]=this.stopped,xe.prototype.save.call(this,t)},Se.prototype.load=function(t){this.eatPauseFramesLeft=this.savedEatPauseFramesLeft[t],this.setNextDir(this.savedNextDirEnum[t]),this.stopped=this.savedStopped[t],xe.prototype.load.call(this,t)},Se.prototype.reset=function(){this.setNextDir(this.startDirEnum),this.stopped=!1,this.inputDirEnum=void 0,this.eatPauseFramesLeft=0,xe.prototype.reset.apply(this)},Se.prototype.setNextDir=function(t){R(this.nextDir,t),this.nextDirEnum=t},Se.prototype.getNumSteps=function(){if(p)return 2;var t=Ti.isActive()?2:0;return this.getStepSizeFromTable(w,t)},Se.prototype.getStepFrame=function(t){return null==t&&(t=this.steps),Math.floor(t/2)%4},Se.prototype.getAnimFrame=function(t){return null==t&&(t=this.getStepFrame()),1!=m&&2!=m||(t=(t+1)%4,wi==on&&(t=1)),3!=m&&3==t&&(t=1),t},Se.prototype.setInputDir=function(t){this.inputDirEnum=t},Se.prototype.clearInputDir=function(t){null!=t&&this.inputDirEnum!=t||(this.inputDirEnum=void 0)},Se.prototype.step=function(){if(!Ln)return this.setPos(this.pixel.x+this.dir.x,this.pixel.y+this.dir.y),1;var t,e=0!=this.dir.x?"x":"y",i=0!=this.dir.x?"y":"x";return this.stopped=this.stopped||0==this.distToMid[e]&&!B(this.tile,this.dir),this.stopped||(this.pixel[e]+=this.dir[e],this.pixel[i]+=(t=this.distToMid[i])<0?-1:0<t?1:0),this.commitPos(),this.stopped?0:1},Se.prototype.steer=function(){if(this.ai){if(0!=this.distToMid.x||0!=this.distToMid.y)return;var t=N(this.tile,this.dirEnum);this.setTarget(),this.setNextDir(I(this.tile,this.targetTile,t))}else this.targetting=void 0;if(null==this.inputDirEnum)this.stopped&&this.setDir(this.nextDirEnum);else{var e={};R(e,this.inputDirEnum),B(this.tile,e)?(this.setDir(this.inputDirEnum),this.setNextDir(this.inputDirEnum),this.stopped=!1):this.stopped||this.setNextDir(this.inputDirEnum)}this.stopped&&o.eating.stopLoop(!0)},Se.prototype.update=function(t){var e=this.getNumSteps();if(!(e<=t))if(0<this.eatPauseFramesLeft)t==e-1&&this.eatPauseFramesLeft--;else if(xe.prototype.update.call(this,t),Ln){var i=Ln.getTile(this.tile.x,this.tile.y);"."!=i&&"o"!=i||(this.lastMeal.x=this.tile.x,this.lastMeal.y=this.tile.y,p||(this.eatPauseFramesLeft="."==i?1:3),o.eating.startLoop(!0),Ln.onDotEat(this.tile.x,this.tile.y),mi.onDotEat(),_i.onDotEat(),M("."==i?10:50),"o"==i&&Ti.activate())," "!=i||this.lastMeal.x==this.tile.x&&this.lastMeal.y==this.tile.y||o.eating.stopLoop(!0)}};var Pe=new Ce;Pe.name="blinky",Pe.color="#FF0000",Pe.pathColor="rgba(255,0,0,0.8)",Pe.isVisible=!0;var Fe=new Ce;Fe.name="pinky",Fe.color="#FFB8FF",Fe.pathColor="rgba(255,184,255,0.8)",Fe.isVisible=!0;var Me=new Ce;Me.name="inky",Me.color="#00FFFF",Me.pathColor="rgba(0,255,255,0.8)",Me.isVisible=!0;var Ee=new Ce;Ee.name="clyde",Ee.color="#FFB851",Ee.pathColor="rgba(255,184,81,0.8)",Ee.isVisible=!0;var ke=new Se;ke.name="pacman",ke.color="#FFFF00",ke.pathColor="rgba(255,255,0,0.8)";var De,ze=[Pe,Fe,Me,Ee,ke],Ae=[Pe,Fe,Me,Ee],Le=16;De=O,ke.pathCenter={x:0,y:0},Pe.pathCenter={x:-2,y:-2},Fe.pathCenter={x:-1,y:-1},Me.pathCenter={x:1,y:1},Ee.pathCenter={x:2,y:2},Pe.getTargetTile=function(){return{x:ke.tile.x,y:ke.tile.y}},Pe.getTargetPixel=function(){return{x:ke.pixel.x,y:ke.pixel.y}},Pe.drawTarget=function(t){this.targetting&&(t.fillStyle=this.color,"pacman"==this.targetting?j.drawCenterPixelSq(t,ke.pixel.x,ke.pixel.y,De):j.drawCenterTileSq(t,this.targetTile.x,this.targetTile.y,De))},Fe.getTargetTile=function(){var t=ke.tile.x+4*ke.dir.x,e=ke.tile.y+4*ke.dir.y;return 0==ke.dirEnum&&(t-=4),{x:t,y:e}},Fe.getTargetPixel=function(){var t=ke.pixel.x+4*ke.dir.x*8,e=ke.pixel.y+4*ke.dir.y*8;return 0==ke.dirEnum&&(t-=32),{x:t,y:e}},Fe.drawTarget=function(t){if(this.targetting){t.fillStyle=this.color;var e=this.getTargetPixel();"pacman"==this.targetting?(t.beginPath(),t.moveTo(ke.pixel.x,ke.pixel.y),0==ke.dirEnum&&t.lineTo(ke.pixel.x,e.y),t.lineTo(e.x,e.y),t.stroke(),j.drawCenterPixelSq(t,e.x,e.y,De)):j.drawCenterTileSq(t,this.targetTile.x,this.targetTile.y,De)}},Me.getTargetTile=function(){var t=ke.tile.x+2*ke.dir.x,e=ke.tile.y+2*ke.dir.y;return 0==ke.dirEnum&&(t-=2),{x:Pe.tile.x+2*(t-Pe.tile.x),y:Pe.tile.y+2*(e-Pe.tile.y)}},Me.getJointPixel=function(){var t=ke.pixel.x+2*ke.dir.x*8,e=ke.pixel.y+2*ke.dir.y*8;return 0==ke.dirEnum&&(t-=16),{x:t,y:e}},Me.getTargetPixel=function(){var t=ke.pixel.x+2*ke.dir.x*8,e=ke.pixel.y+2*ke.dir.y*8;return 0==ke.dirEnum&&(t-=16),{x:Pe.pixel.x+2*(t-Pe.pixel.x),y:Pe.pixel.y+2*(e-Pe.pixel.y)}},Me.drawTarget=function(t){if(this.targetting){var e,i=this.getJointPixel();"pacman"==this.targetting?(e=this.getTargetPixel(),t.beginPath(),t.moveTo(ke.pixel.x,ke.pixel.y),0==ke.dirEnum&&t.lineTo(ke.pixel.x,i.y),t.lineTo(i.x,i.y),t.moveTo(Pe.pixel.x,Pe.pixel.y),t.lineTo(e.x,e.y),t.closePath(),t.stroke(),t.beginPath(),t.arc(i.x,i.y,2,0,2*Math.PI),t.fillStyle=t.strokeStyle,t.fill(),t.fillStyle=this.color,j.drawCenterPixelSq(t,e.x,e.y,De)):(t.fillStyle=this.color,j.drawCenterTileSq(t,this.targetTile.x,this.targetTile.y,De))}},Ee.getTargetTile=function(){var t=ke.tile.x-(this.tile.x+this.dir.x),e=ke.tile.y-(this.tile.y+this.dir.y);return 64<=t*t+e*e?(this.targetting="pacman",{x:ke.tile.x,y:ke.tile.y}):(this.targetting="corner",{x:this.cornerTile.x,y:this.cornerTile.y})},Ee.getTargetPixel=function(){return{x:ke.pixel.x,y:ke.pixel.y}},Ee.drawTarget=function(t){this.targetting&&(t.fillStyle=this.color,"pacman"==this.targetting?(t.beginPath(),t.arc(ke.pixel.x,ke.pixel.y,64,0,2*Math.PI),t.closePath(),t.stroke(),j.drawCenterPixelSq(t,ke.pixel.x,ke.pixel.y,De)):(pi.getCommand()==di&&(t.beginPath(),t.arc(ke.pixel.x,ke.pixel.y,64,0,2*Math.PI),t.strokeStyle="rgba(255,255,255,0.25)",t.stroke()),j.drawCenterTileSq(t,this.targetTile.x,this.targetTile.y,De)))},ke.setTarget=function(){Pe.mode==be||Pe.scared?(this.targetTile.x=Fe.tile.x,this.targetTile.y=Fe.tile.y,this.targetting="pinky"):(this.targetTile.x=Fe.tile.x+2*(ke.tile.x-Fe.tile.x),this.targetTile.y=Fe.tile.y+2*(ke.tile.y-Fe.tile.y),this.targetting="flee")},ke.drawTarget=function(t){var e,i;this.ai&&(t.fillStyle=this.color,"flee"==this.targetting?(e=ke.pixel.x-Fe.pixel.x,i=ke.pixel.y-Fe.pixel.y,e=Fe.pixel.x+2*e,i=Fe.pixel.y+2*i,t.beginPath(),t.moveTo(Fe.pixel.x,Fe.pixel.y),t.lineTo(e,i),t.closePath(),t.stroke(),j.drawCenterPixelSq(t,e,i,De)):j.drawCenterPixelSq(t,Fe.pixel.x,Fe.pixel.y,De))},ke.getPathDistLeft=function(t,e){var i,n;return"pinky"==this.targetting?0==e||2==e?Math.abs(t.y-Fe.pixel.y):Math.abs(t.x-Fe.pixel.x):(i=ke.pixel.x-Fe.pixel.x,n=ke.pixel.y-Fe.pixel.y,i=Fe.pixel.x+2*i,n=Fe.pixel.y+2*n,0==e||2==e?Math.abs(n-t.y):Math.abs(i-t.x))};var Re,Ie,Ne,Be,qe,Oe,Ge,He,We,Ye,Ue,Je,Ve,Ke,je,Qe,Xe,Ze,$e,ti,ei,ii,ni,oi,ri,si,ai,li,ui,fi,hi,ci,_i,di=0,vi=1,pi=((Ie=[{},{},{}])[0][Re=420]=di,Ie[0][Re+=1200]=vi,Ie[0][Re+=420]=di,Ie[0][Re+=1200]=vi,Ie[0][Re+=300]=di,Ie[0][Re+=1200]=vi,Ie[0][Re+=300]=di,Ie[1][Re=420]=di,Ie[1][Re+=1200]=vi,Ie[1][Re+=420]=di,Ie[1][Re+=1200]=vi,Ie[1][Re+=300]=di,Ie[1][Re+=61980]=vi,Ie[1][Re+=1]=di,Ie[2][Re=300]=di,Ie[2][Re+=1200]=vi,Ie[2][Re+=300]=di,Ie[2][Re+=1200]=vi,Ie[2][Re+=300]=di,Ie[2][Re+=62220]=vi,Ie[2][Re+=1]=di,qe=function(t){var e=Ie[1==w?0:2<=w&&w<=4?1:2][t];return 0==m?e:t<=1620&&null!=e?di:void 0},Oe={},Ge={},{save:function(t){Oe[t]=Ne,Ge[t]=Be},load:function(t){Ne=Oe[t],Be=Ge[t]},reset:function(){Be=vi,Ne=0},update:function(){var t;if(!Ti.isActive()){if(null!=(t=qe(Ne)))for(Be=t,i=0;i<4;i++)Ae[i].reverse();Ne++}},getCommand:function(){return Be},setCommand:function(t){Be=t}}),mi=function(){var e,n,o={1:function(){return 0},2:function(){return 1==w?30:0},3:function(){return 1==w?60:2==w?50:0}},r={};r[1]=7,r[2]=17,r[3]=32;var s,a={},l={},u={},f={};return{save:function(t){u[t]=e,1==n?l[t]=s:0==n&&(f[t]={},f[t][1]=a[1],f[t][2]=a[2],f[t][3]=a[3])},load:function(t){e=u[t],1==n?s=l[t]:0==n&&(a[1]=f[t][1],a[2]=f[t][2],a[3]=f[t][3])},onNewLevel:function(){e=n=0,a[1]=0,a[2]=0,a[3]=0},onRestartLevel:function(){n=1,s=e=0},onDotEat:function(){var t;if(e=0,1==n)s++;else for(t=1;t<4;t++)if(4==Ae[t].mode){a[t]++;break}},update:function(){var t;if(0==n){for(i=1;i<4;i++)if(4==(t=Ae[i]).mode){if(a[i]>=o[i]())return void t.leaveHome();break}}else if(1==n){if(s==r[1]&&4==Fe.mode)return void Fe.leaveHome();if(s==r[2]&&4==Me.mode)return void Me.leaveHome();if(s==r[3]&&4==Ee.mode)return n=s=0,void Ee.leaveHome()}if((w<5?240:180)<e){for(e=0,i=1;i<4;i++)if(4==(t=Ae[i]).mode){t.leaveHome();break}}else e++}}}(),xi=(He=[[20,30,40,40,40,50,50,50,60,60,60,70,70,70,100,100,100,100,120,120,120],[10,15,20,20,20,25,25,25,30,30,30,40,40,40,50,50,50,50,60,60,60]],Ye=function(t){var e=w;return 21<e&&(e=21),244-He[t-1][e-1]},Ue={},{onNewLevel:function(){We=!1},onRestartLevel:function(){We=!0},update:function(){We&&4!=Ee.mode&&(We=!1),We?Pe.elroy=0:Ln.dotsEaten>=Ye(2)?Pe.elroy=2:Ln.dotsEaten>=Ye(1)?Pe.elroy=1:Pe.elroy=0},save:function(t){Ue[t]=We},load:function(t){We=Ue[t]}}),Ti=(Je=[6,5,4,3,2,5,2,2,1,5,2,1,1,3,1,1,0,1],Ze=function(){return 18<w?0:60*Je[w-1]},Ve=[5,5,5,5,5,5,5,5,3,5,5,3,3,5,3,3,0,3],$e=function(){return 18<w?0:Ve[w-1]},ti={},ei={},ii={},ni={},{save:function(t){ti[t]=Ke,ei[t]=je,ii[t]=Qe,ni[t]=Xe},load:function(t){Ke=ti[t],je=ei[t],Qe=ii[t],Xe=ni[t]},reset:function(){for(o.ghostTurnToBlue.stopLoop(),je=!1,Qe=100,Xe=Ke=0,i=0;i<4;i++)Ae[i].scared=!1},update:function(){je&&(Ke==Ze()?this.reset():Ke++)},activate:function(){for(o.ghostNormalMove.stopLoop(),o.ghostTurnToBlue.startLoop(),je=!0,Ke=0,Qe=100,i=0;i<4;i++)Ae[i].onEnergized();0==Ze()&&this.reset()},isActive:function(){return je},isFlash:function(){var t=Math.floor((Ze()-Ke)/14);return t<=2*$e()-1&&t%2==0},getPoints:function(){return Qe},addPoints:function(){M(Qe*=2),Xe=60},showingPoints:function(){return 0<Xe},updatePointsTimer:function(){0<Xe&&Xe--}}),yi=function(){this.pixel={x:0,y:0},this.fruitHistory={},this.scoreDuration=2,this.scoreFramesLeft,this.savedScoreFramesLeft={}},gi=function(){yi.call(this),this.fruits=[{name:"cherry",points:100},{name:"strawberry",points:300},{name:"ripple",points:-100},{name:"bitcoin",points:700},{name:"grin",points:1e3},{name:"monero",points:2e3},{name:"tari",points:5e3}],this.dotLimit1=64,this.dotLimit2=176,this.pen_path="<<<<<<^^^^^^>>>>>>>>>vvvvvv<<",this.savedIsPresent={},this.savedPixel={},this.savedPathMode={},this.savedFrame={},this.savedNumFrames={},this.savedPath={}};gi.prototype=f(yi.prototype={isScorePresent:function(){return 0<this.scoreFramesLeft},onNewLevel:function(){this.buildFruitHistory()},setCurrentFruit:function(t){this.currentFruitIndex=t},onDotEat:function(){this.isPresent()||Ln.dotsEaten!=this.dotLimit1&&Ln.dotsEaten!=this.dotLimit2||this.initiate()},save:function(t){this.savedScoreFramesLeft[t]=this.scoreFramesLeft},load:function(t){this.scoreFramesLeft=this.savedScoreFramesLeft[t]},reset:function(){this.scoreFramesLeft=0},getCurrentFruit:function(){return this.fruits[this.currentFruitIndex]},getPoints:function(){return this.getCurrentFruit().points},update:function(){0<this.scoreFramesLeft&&this.scoreFramesLeft--},isCollide:function(){return Math.abs(ke.pixel.y-this.pixel.y)<=O&&Math.abs(ke.pixel.x-this.pixel.x)<=q},testCollide:function(){this.isPresent()&&this.isCollide()&&(M(this.getPoints()),o.silence(!0),o.eatingFruit.play(),setTimeout(Ae[0].playSounds,500),this.reset(),this.scoreFramesLeft=60*this.scoreDuration)}},{shouldRandomizeFruit:function(){return 7<w},getFruitFromLevel:function(t){return t<=7?this.fruits[t-1]:void 0},onNewLevel:function(){this.shouldRandomizeFruit()?this.setCurrentFruit(0):this.setCurrentFruit(w-1),yi.prototype.onNewLevel.call(this)},buildFruitHistory:function(){var t;for(this.fruitHistory={},t=1;t<=Math.max(w,7);t++)this.fruitHistory[t]=this.fruits[t-1]},reset:function(){yi.prototype.reset.call(this),this.frame=0,this.numFrames=0,this.path=void 0},initiatePath:function(t){this.frame=0,this.numFrames=16*t.length,this.path=t},initiate:function(){this.shouldRandomizeFruit()&&this.setCurrentFruit(d(0,6));var t=Ln.fruitPaths.entrances,e=t[d(0,t.length-1)];this.initiatePath(e.path),this.pathMode=0,this.pixel.x=e.start.x,this.pixel.y=e.start.y},isPresent:function(){return this.frame<this.numFrames},bounceFrames:(oi={dx:0,dy:-1},ri={dx:0,dy:1},si={dx:-1,dy:0},ai={dx:1,dy:0},li={dx:-1,dy:-1},ui={dx:1,dy:-1},fi={dx:-1,dy:1},hi={dx:1,dy:1},ci={dx:0,dy:0},{"^":[oi,oi,oi,oi,oi,oi,oi,oi,oi,ci,oi,ci,ci,ri,ci,ri],">":[ci,ui,ci,ai,ci,ui,ci,ai,ci,ai,ci,ai,ci,hi,hi,ci],"<":[ci,ci,li,ci,si,ci,li,ci,si,ci,si,ci,si,ci,fi,fi],v:[ci,ri,ri,ri,ri,ri,ri,ri,ri,ri,ri,ri,oi,oi,ci,oi]}),move:function(){var t=this.path[Math.floor(this.frame/16)],e=this.bounceFrames[t][this.frame%16];this.pixel.x+=e.dx,this.pixel.y+=e.dy,this.frame++},setNextPath:function(){if(0==this.pathMode)this.pathMode=1,this.initiatePath(this.pen_path);else if(1==this.pathMode){this.pathMode=2;var t=Ln.fruitPaths.exits,e=t[d(0,t.length-1)];this.initiatePath(e.path)}else 2==this.pathMode&&this.reset()},update:function(){yi.prototype.update.call(this),this.isPresent()&&(this.move(),this.frame==this.numFrames&&this.setNextPath())},save:function(t){yi.prototype.save.call(this,t),this.savedPixel[t]=this.isPresent()?{x:this.pixel.x,y:this.pixel.y}:void 0,this.savedPathMode[t]=this.pathMode,this.savedFrame[t]=this.frame,this.savedNumFrames[t]=this.numFrames,this.savedPath[t]=this.path},load:function(t){yi.prototype.load.call(this,t),this.savedPixel[t]&&(this.pixel.x=this.savedPixel[t].x,this.pixel.y=this.savedPixel[t].y),this.pathMode=this.savedPathMode[t],this.frame=this.savedFrame[t],this.numFrames=this.savedNumFrames[t],this.path=this.savedPath[t]}});var bi,wi,Ci,Si,Pi,Fi,Mi,Ei,ki,Di,zi,Ai,Li,Ri,Ii,Ni,Bi,qi,Oi=(bi=new gi,function(){_i=bi}),Gi=function(){var e,n,i=1e3/60,o=!1,t=!1;!function(){for(var r=0,t=["ms","moz","webkit","o"],e=0;e<t.length&&!window.requestAnimationFrame;++e)window.requestAnimationFrame=window[t[e]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[e]+"CancelAnimationFrame"]||window[t[e]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(t,e){var i=(new Date).getTime(),n=Math.max(0,16-(i-r)),o=window.setTimeout(function(){t(i+n)},n);return r=i+n,o}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){clearTimeout(t)})}();var r,s,a,l,u,f=(r=[],s=0,l=!(a=-1),function(t){l&&(s=(s+1)%60),59==(a=(a+1)%60)&&(l=!0);var e=((r[a]=t)-r[s])/1e3,i=a-s;i<0&&(i+=60),n=i/e}),h=function(t){null==e&&(e=t),f(t);for(e=Math.max(e,t-3*i),(o||jt.isOpen())&&(e=t),nt.update();e<t;)wi.update(),e+=i;j.beginFrame(),wi.draw(),nt.isValidState()&&j.renderFunc(nt.draw),j.endFrame(),u=requestAnimationFrame(h)};return{getFramePeriod:function(){return i},setUpdatesPerSecond:function(t){i=1e3/t},init:function(){var t=this;window.addEventListener("focus",function(){t.start()}),window.addEventListener("blur",function(){t.stop()}),this.start()},start:function(){t||(u=requestAnimationFrame(h),t=!0)},stop:function(){t&&(cancelAnimationFrame(u),t=!1)},togglePause:function(){o=!o},isPaused:function(){return o},getFps:function(){return n}}}(),Hi=function(t,e,i,n){wi=e?Wi(wi,t,e,i,n):t,o.silence(),wi.init(),Gi.isPaused()&&Gi.togglePause()},Wi=function(e,i,t,n,o){var r,s=Math.floor(t/2),a=function(){return r/t*2+(r<s?0:-1)},l=!1;return{init:function(){l=!(r=0)},draw:function(){if(l){var t=a();r<s?e&&(e.draw(),j.setOverlayColor("rgba(0,0,0,"+t+")")):s<r&&(i.draw(),j.setOverlayColor("rgba(0,0,0,"+(1-t)+")"))}},update:function(){r<s?n&&e.update():r==s?i.init():r<t?o&&i.update():(wi=i,l=!1),r++}}},Yi={init:function(){},draw:function(){},update:function(){},getMenu:function(){}},Ui=function(){var e,i,t=function(){i=o.isSelected?(e=x(),2==m?"#47b8ff":ke.color):r.isSelected?(e="roger.ver",Pe.color):s.isSelected?(e="jihan.wu",Fe.color):a.isSelected?(e="craig.wright",Me.color):l.isSelected?(e="dan.larimer",Ee.color):(e=x(),"#FFF")},n=53,o=new rt(n,24,20,30,function(){m=1});o.setIcon(function(t,e,i,n){g()(t,e,i,3,ke.getAnimFrame(ke.getStepFrame(Math.floor((0==m?n+4:n)/1.5))),!0)});var r=new rt(n+=40,24,20,30);r.setIcon(function(t,e,i,n){y()(t,e,i,Math.floor(n/6)%2,1,void 0,void 0,void 0,Pe.color)});var s=new rt(n+=20,24,20,30);s.setIcon(function(t,e,i,n){y()(t,e,i,Math.floor(n/6)%2,1,void 0,void 0,void 0,Fe.color)});var a=new rt(n+=20,24,20,30);a.setIcon(function(t,e,i,n){y()(t,e,i,Math.floor(n/6)%2,1,void 0,void 0,void 0,Me.color)});var l=new rt(n+=20,24,20,30);l.setIcon(function(t,e,i,n){y()(t,e,i,Math.floor(n/6)%2,1,void 0,void 0,void 0,Ee.color)});var u=function(t){t(o),t(r),t(s),t(a),t(l)};return u(function(t){t.borderBlurColor=t.borderFocusColor="#000"}),{init:function(){t(),u(function(t){t.enable()})},shutdown:function(){u(function(t){t.disable()})},draw:function(){u(function(t){j.renderFunc(t.draw,t)}),t(),j.renderFunc(function(t){t.font="8px ArcadeR",t.fillStyle=i,t.textAlign="center",t.textBaseline="top",t.fillText(e,113,8)})},update:function(){u(function(t){t.update()})},getYellowBtn:function(){return o}}}(),Ji=(Ci=function(t,e){Ui.shutdown(),Si.disable(),Hi(t,e)},(Si=new at("",16,0,194,24,8,"8px ArcadeR","#EEE")).addSpacer(2),Si.addTextButton("PLAY",function(){p=v=!1,Qi.setStartLevel(1),Ci(Qi,60)}),Si.addSpacer(.5),Si.addTextButton("ABOUT",function(){Ci(ji)}),Si.addSpacer(.5),Si.addTextButton("BACK",function(){location.assign(document.referrer||"https://tari.com/contribute")}),Si.backButton=Si.buttons[Si.buttonCount-1],{init:function(){o.startMusic.play(),Si.enable(),Ui.init(),Ln=void 0},draw:function(){j.clearMapFrame(),j.renderFunc(Si.draw,Si),Ui.draw()},update:function(){Ui.update()},getMenu:function(){return Si}}),Vi=(Fi=1,Mi=function(t,e){Ui.shutdown(),Pi.disable(),Hi(t,e)},Ei=function(t){Vi.setStartAct(t),Mi(Vi)},ki=function(t,e,i,n){t.save(),t.translate(e,i),t.scale(1,n),t.beginPath(),t.moveTo(0,-4),t.lineTo(8,4),t.lineTo(-8,4),t.closePath(),t.fillStyle="#FFF",t.fill(),t.restore()},{init:function(){!function(a){var t,e;for(Fi=a,(Pi=new at("",16,0,194,24,8,"8px ArcadeR","#EEE")).addSpacer(2),Pi.addIconButton(function(t,e,i){ki(t,e,i,1)},function(){Ei(Math.max(1,a-4))}),t=0;t<4;t++)e=Hn(a+t),Pi.addTextIconButton("LEVELS "+e[0]+"-"+e[1],function(e){return function(){var t;t=a+e,Ki.setAct(t),Mi(Ki)}}(t),function(s){return function(t,e,i){var n=8/3*2,o=8/6;t.save(),t.translate(e,i),t.beginPath(),t.moveTo(-n,0),t.lineTo(-n,-o),t.quadraticCurveTo(-n,-n,-o,-n),t.lineTo(o,-n),t.quadraticCurveTo(n,-n,n,-o),t.lineTo(n,o),t.quadraticCurveTo(n,n,o,n),t.lineTo(-o,n),t.quadraticCurveTo(-n,n,-n,o),t.closePath();var r=Gn(a+s);t.fillStyle=r.wallFillColor,t.strokeStyle=r.wallStrokeColor,t.fill(),t.stroke(),t.restore()}}(t));Pi.addIconButton(function(t,e,i){ki(t,e,i,-1)},function(){Ei(a+4)}),Pi.addTextButton("BACK",function(){Mi(Ji)}),Pi.backButton=Pi.buttons[Pi.buttonCount-1],Pi.enable()}(Fi),Ui.init()},setStartAct:function(t){Fi=t},draw:function(){j.clearMapFrame(),j.renderFunc(Pi.draw,Pi),Ui.draw()},update:function(){Ui.update()},getMenu:function(){return Pi}}),Ki=(zi=1,Ai=function(t,e){Ui.shutdown(),Di.disable(),Hi(t,e)},{init:function(){Oi(),function(t){var e,i=Hn(t);if((Di=new at("",16,0,194,24,8,"8px ArcadeR","#EEE")).addSpacer(2),i[0]<i[1])for(e=i[0];e<=i[1];e++)Di.addTextIconButton("LEVEL "+e,function(e){return function(){var t;t=e,Qi.setStartLevel(t),Ai(Qi,60)}}(e),function(o){return function(t,e,i){var n=_i.getFruitFromLevel(o);n&&$.drawFruitSprite(t,e,i,n.name)}}(e));Di.addSpacer(.5),Di.addTextButton("BACK",function(){Ai(Vi)}),Di.backButton=Di.buttons[Di.buttonCount-1],Di.enable()}(zi),Ui.init()},setAct:function(t){zi=t},draw:function(){j.clearMapFrame(),j.renderFunc(Di.draw,Di),Ui.draw()},update:function(){Ui.update()},getMenu:function(){return Di}}),ji=function(){var i,n,o=new at("",16,0,194,24,8,"8px ArcadeR","#EEE");o.addSpacer(8),o.addTextButton("BACK",function(){var t,e;t=Ji,Ui.shutdown(),o.disable(),Hi(t,e)}),o.backButton=o.buttons[o.buttonCount-1];var t=function(t){t.font="8px ArcadeR",t.fillStyle="#FFF",t.textBaseline="top",t.textAlign="center";var e;for(e=0;e<n;e++)t.fillText(i[e],112,96+2*e*8)};return{init:function(){o.enable(),Ui.init()},draw:function(){j.clearMapFrame(),j.renderFunc(o.draw,o),Ui.draw(),i=T(),n=i.length,j.renderFunc(t)},update:function(){Ui.update()},getMenu:function(){return o}}}(),Qi=(function(){var t=new at("",16,242,194,24,8,"8px ArcadeR","#EEE");t.addTextButton("BACK",function(){Hi(Ji),t.disable()}),t.backButton=t.buttons[t.buttonCount-1];var s,a=0,l={};!function(){for(var i=0,t=-12,e=-8,n=function(t,e){l[i++]={x:t,y:e}};e<224;e+=3)n(t,e);for(;t<132;t+=3)n(t,e);for(;-8<e;e-=3)n(t,e);for(;-12<t;t-=3)n(t,e);s=i}();var e=function(n){n.fillStyle="#555";var t,e;for(t=0;t<s;t++)e=l[t],n.fillRect(e.x,e.y,2,2);for(n.fillStyle="#FFF",t=0;t<63;t++)e=l[(4*t+Math.floor(a/2))%s],n.fillRect(e.x,e.y,2,2);n.font="8px ArcadeR",n.textBaseline="top",n.textAlign="right";var i,o="#AAA";i=0,n.fillStyle="#FFF",n.fillText("HIGH SCORES",104,i),i+=32;var r=function(t,e){var i;for(n.lineWidth=1,n.lineCap="round",n.strokeStyle="rgba(255,255,255,0.5)",n.save(),n.translate(-2.5,0),i=-4;i<=4;i+=2)n.beginPath(),n.moveTo(t+8,e+i),n.lineTo(t+8*(.5*Math.random()+1.5),e+i),n.stroke();n.restore()};n.fillStyle=o,n.fillText(P[0],72,i),$.drawPacmanSprite(n,88,i+4,1,1),i+=16,n.fillStyle=o,n.fillText(P[1],72,i),r(88,i+4),$.drawPacmanSprite(n,88,i+4,1,1),i+=24,n.fillStyle=o,n.fillText(P[2],72,i),$.drawMsPacmanSprite(n,88,i+4,1,1),i+=16,n.fillStyle=o,n.fillText(P[3],72,i),r(88,i+4),$.drawMsPacmanSprite(n,88,i+4,1,1),i+=24,n.fillStyle=o,n.fillText(P[6],72,i),$.drawOttoSprite(n,88,i+4,1,0),i+=16,n.fillStyle=o,n.fillText(P[7],72,i),r(88,i+4),$.drawOttoSprite(n,88,i+4,1,0),i+=24,n.fillStyle=o,n.fillText(P[4],72,i),$.drawCookiemanSprite(n,88,i+4,1,1),i+=16,n.fillStyle=o,n.fillText(P[5],72,i),r(88,i+4),$.drawCookiemanSprite(n,88,i+4,1,1)},i=function(t){t.globalAlpha=.5,t.font="8px sans-serif",t.textBaseline="middle",t.textAlign="left";var e=160,i=0;t.fillStyle="#ffb8ae",t.fillRect(e-1,i-1.5,2,2),t.fillStyle="#FFF",t.fillText("10",e+8,i),i+=12,t.fillStyle="#ffb8ae",t.beginPath(),t.arc(e,i-.5,4,0,2*Math.PI),t.fill(),t.fillStyle="#FFF",t.fillText("50",e+8,i),i+=24,$.drawGhostSprite(t,e,i,0,3,!0),$.drawGhostPoints(t,e+16,i,200);var n=t.globalAlpha;i+=16,t.globalAlpha=.5*n,$.drawGhostSprite(t,e,i,0,3,!0),t.globalAlpha=n,$.drawGhostSprite(t,e+16,i,0,3,!0),$.drawGhostPoints(t,e+32,i,400),i+=16,t.globalAlpha=.5*n,$.drawGhostSprite(t,e,i,0,3,!0),$.drawGhostSprite(t,e+16,i,0,3,!0),t.globalAlpha=n,$.drawGhostSprite(t,e+32,i,0,3,!0),$.drawGhostPoints(t,e+48,i,800),i+=16,t.globalAlpha=.5*n,$.drawGhostSprite(t,e,i,0,3,!0),$.drawGhostSprite(t,e+16,i,0,3,!0),$.drawGhostSprite(t,e+32,i,0,3,!0),t.globalAlpha=n,$.drawGhostSprite(t,e+48,i,0,3,!0),$.drawGhostPoints(t,e+64,i,1600);var o,r,s=[{name:"monero",points:100},{name:"strawberry",points:200},{name:"orange",points:500},{name:"pretzel",points:700},{name:"apple",points:1e3},{name:"pear",points:2e3},{name:"banana",points:5e3}],a=[{name:"cherry",points:100},{name:"strawberry",points:300},{name:"orange",points:500},{name:"apple",points:700},{name:"melon",points:1e3},{name:"galaxian",points:2e3},{name:"bell",points:3e3},{name:"key",points:5e3}];for(i+=24,o=0;o<a.length;o++)r=a[o],$.drawFruitSprite(t,e,i,r.name),$.drawPacFruitPoints(t,e+16,i,r.points),i+=16;for(e+=48,i=108,o=0;o<s.length;o++)r=s[o],$.drawFruitSprite(t,e,i,r.name),$.drawMsPacFruitPoints(t,e+16,i,r.points),i+=16;t.globalAlpha=1}}(),Ri=1,{init:function(){r(),w=Ri-1,C=3,k(Li=0),Oi(),Zi.init()},setStartLevel:function(t){Ri=t},draw:function(){Ln&&(j.blitMap(),j.drawScore(),j.drawMessage("PLAYER ONE","#0FF",9,14),j.drawReadyMessage())},update:function(){0==Li?(C--,wi=Zi,j.drawMap()):Li++}}),Xi={init:function(){var t;for(o.startMusic.play(),t=0;t<5;t++)ze[t].reset();pi.reset(),_i.reset(),Ti.reset(),Ln.resetTimeEaten(),Ii=0},draw:function(){Ln&&(j.blitMap(),j.drawScore(),j.drawActors(),j.drawReadyMessage())},update:function(){240==Ii?Hi(tn):Ii++}},Zi=f(Xi,{init:function(){w++,Yn(),Ln.resetCurrent(),_i.onNewLevel(),j.drawMap(),mi.onNewLevel(),xi.onNewLevel(),Xi.init.call(this)}}),$i=f(Xi,{init:function(){C--,mi.onRestartLevel(),xi.onRestartLevel(),j.drawMap(),Xi.init.call(this)}}),tn={init:function(){},draw:function(){j.setLevelFlash(!1),j.blitMap(),j.drawScore(),j.beginMapClip(),j.drawFruit(),j.drawPaths(),j.drawActors(),j.drawTargets(),j.endMapClip()},isPacmanCollide:function(){var t,e;for(t=0;t<4;t++)if((e=Ae[t]).tile.x==ke.tile.x&&e.tile.y==ke.tile.y&&0==e.mode){if(e.scared)Ti.addPoints(),e.onEaten();else{if(ke.invincible)continue;Hi(on)}return!0}return!1},update:function(){var t,e,i=!1;if(Ti.showingPoints()){for(e=0;e<2;e++)for(t=0;t<4;t++)Ae[t].mode!=be&&Ae[t].mode!=we||Ae[t].update(e);Ti.updatePointsTimer(),i=!0}else{for(t=0;t<4;t++)Ae[t].mode==ge&&(Ae[t].mode=be,Ae[t].targetting="door");Ae[0].playSounds()}if(!i){for(mi.update(),pi.update(),xi.update(),_i.update(),Ti.update(),e=0;e<2;e++){if(ke.update(e),_i.testCollide(),Ln.allDotsEaten()){Hi(rn),o.extend.play();break}if(this.isPacmanCollide())break;for(t=0;t<4;t++)ze[t].update(e);if(this.isPacmanCollide())break}for(t=0;t<5;t++)ze[t].frames++}}},en={init:function(){this.frames=0,this.triggerFrame=0;var t=this.triggers[0];this.drawFunc=t?t.draw:void 0,this.updateFunc=t?t.update:void 0},update:function(){var t=this.triggers[this.frames];t&&(t.init&&t.init(),this.drawFunc=t.draw,this.updateFunc=t.update,this.triggerFrame=0),this.updateFunc&&this.updateFunc(this.triggerFrame),this.frames++,this.triggerFrame++},draw:function(){this.drawFunc&&this.drawFunc(this.triggerFrame)}},nn=f(en,{init:function(){en.init.call(this)},save:function(t){},load:function(t){},update:function(){en.update.call(this)},draw:function(){this.drawFunc&&en.draw.call(this)}}),on=(Ni=function(){j.blitMap(),j.drawScore()},f(nn,{triggers:{0:{init:function(){o.die.play()},update:function(){var t;for(t=0;t<4;t++)ze[t].frames++},draw:function(){Ni(),j.beginMapClip(),j.drawFruit(),j.drawActors(),j.endMapClip()}},60:{draw:function(){Ni(),j.beginMapClip(),j.drawPlayer(),j.endMapClip()}},120:{draw:function(t){Ni(),j.beginMapClip(),j.drawDyingPlayer(t/75),j.endMapClip()}},195:{draw:function(){Ni(),j.beginMapClip(),j.drawDyingPlayer(1),j.endMapClip()}},240:{draw:function(){Ni(),j.beginMapClip(),j.drawDyingPlayer(1),j.endMapClip()},init:function(){Hi(0==C?sn:$i)}}}})),rn=(Bi=function(t){j.setLevelFlash(t),j.blitMap(),j.drawScore(),j.beginMapClip(),j.drawPlayer(),j.endMapClip()},f(nn,{triggers:{0:{draw:function(){j.setLevelFlash(!1),j.blitMap(),j.drawScore(),j.beginMapClip(),j.drawFruit(),j.drawActors(),j.drawTargets(),j.endMapClip()}},120:{draw:function(){Bi(!0)}},132:{draw:function(){Bi(!1)}},144:{draw:function(){Bi(!0)}},156:{draw:function(){Bi(!1)}},168:{draw:function(){Bi(!0)}},180:{draw:function(){Bi(!1)}},192:{draw:function(){Bi(!0)}},204:{draw:function(){Bi(!1)}},216:{init:function(){Bn()||Hi(Zi,60)}}}})),sn={init:function(){qi=0},draw:function(){j.blitMap(),j.drawScore(),j.drawMessage("GAME  OVER","#F00",9,20)},update:function(){120==qi?Hi(Ji,60):qi++}};!function(){var t=function(){this.listeners={}};t.prototype={add:function(t,e,i){this.listeners[t]=this.listeners[t]||[],this.listeners[t].push({isActive:i,callback:e})},exec:function(t,e){var i=this.listeners[t];if(i){var n,o,r=i.length;for(n=0;n<r&&((o=i[n]).isActive&&!o.isActive()||(e.preventDefault(),!o.callback()));n++);}}};var n=new t,o=new t,e=function(t,e,i){n.add(t,e,i)},i=function(t,e,i){o.add(t,e,i)},r={};window.addEventListener("keydown",function(t){var e=(t||window.event).keyCode;r[e]||(r[e]=!0,n.exec(e,t))}),window.addEventListener("keyup",function(t){var e=(t||window.event).keyCode;r[e]=!1,o.exec(e,t)});var s,a=[!1,!1,!1,!1],l=function(){return!(s=wi.getMenu&&wi.getMenu())&&jt.isOpen()&&(s=jt.getMenu()),s};e(27,function(){return s.backButton&&s.backButton.onclick(),!0},l),e(82,function(){c(2)},h),e(13,function(){s.clickCurrentOption()},l);var u=function(){var t=l();return t&&!t.noArrowKeys};e(38,function(){s.selectPrevOption()},u),e(40,function(){s.selectNextOption()},u);var f=function(){return nt.isValidState()&&!jt.isOpen()};e(27,function(){return jt.getMenuButton().onclick(),!0},f),e(66,function(){return jt.getBossMenu().enable(),!0},f),e(66,function(){return s.backButton&&s.backButton.onclick(),!0},l);var h=function(){return wi==Yi||wi==Qi||wi==tn||wi==Zi||wi==$i};e(84,function(){c(0)},h),e(37,function(){ke.setInputDir(1)},h),e(39,function(){ke.setInputDir(3)},h),e(38,function(){ke.setInputDir(0)},h),e(40,function(){ke.setInputDir(2)},h),i(37,function(){ke.clearInputDir(1)},h),i(39,function(){ke.clearInputDir(3)},h),i(38,function(){ke.clearInputDir(0)},h),i(40,function(){ke.clearInputDir(2)},h),e(65,function(){c(1)},h),e(73,function(){c(3)},h);var c=function(t){a[t]=!a[t],a.every(function(t){return t})&&(C+=1,a=[!1,!1,!1,!1])};e(77,function(){Hi(rn)},function(){return wi==tn}),e(35,function(){Gi.togglePause()})}();var an,ln,un,fn,hn,cn,_n,dn,vn,pn,mn,xn,Tn,yn,gn,bn,wn,Cn,Sn,Pn,Fn,Mn,En,kn,Dn,zn,An,Ln,Rn=function(t,e){Ln=void 0,j.drawMap(!0),setTimeout(o.coffeeBreakMusic.startLoop,1200),t.nextState=e,Hi(t,60)},In=(wn=new Se,Cn=new Se,Sn=function(t,e){var i,n=e.getAnimFrame();e==wn?i=1==m?$.drawPacmanSprite:$.drawOttoSprite:e==Cn&&(i=1==m?$.drawMsPacmanSprite:$.drawMsOttoSprite),i(t,e.pixel.x,e.pixel.y,e.dirEnum,n)},f(en,{init:function(){en.init.call(this),Cn.frames=20,wn.frames=12,wn.setPos(-10,99),wn.setDir(3),Cn.setPos(232,180),Cn.setDir(1),Me.frames=0,Me.mode=0,Me.scared=!1,Me.setPos(wn.pixel.x-42,99),Me.setDir(3),Me.faceDirEnum=3,Fe.frames=3,Fe.mode=0,Fe.scared=!1,Fe.setPos(Cn.pixel.x+49,180),Fe.setDir(1),Fe.faceDirEnum=1,s(),r(),Ti.reset(),wn.getStepFrame=function(){return Math.floor(this.frames/4)%4},Cn.getStepFrame=function(){return Math.floor(this.frames/4)%4},Me.getAnimFrame=function(){return Math.floor(this.frames/8)%2},Fe.getAnimFrame=function(){return Math.floor(this.frames/8)%2},wn.getNumSteps=function(){return 1},Cn.getNumSteps=function(){return 1},Me.getNumSteps=function(){return 1},Fe.getNumSteps=function(){return 1},wn.steer=function(){},Cn.steer=function(){},Me.steer=function(){},Fe.steer=function(){}},triggers:{0:{update:function(){!function(){var t;for(t=0;t<2;t++)wn.update(t),Cn.update(t),Me.update(t),Fe.update(t);wn.frames++,Cn.frames++,Me.frames++,Fe.frames++}(),105==Me.pixel.x&&(Me.getNumSteps=function(){return xe.prototype.getStepSizeFromTable.call(this,5,6)},Fe.getNumSteps=function(){return xe.prototype.getStepSizeFromTable.call(this,5,6)})},draw:function(){j.blitMap(),j.beginMapClip(),j.renderFunc(function(t){Sn(t,wn),Sn(t,Cn)}),j.drawGhost(Me),j.drawGhost(Fe),j.endMapClip()}},300:(un=[1,0,1,0,0,1,0,1,0,1,0,0,1,0,1,0,1,0,0,1,0,1,0,1,0],fn=[-1,0,-1,0,0,0,0,0,1,0,1,0,0,0,-1,0,-1,0,0,0,0,0,1,0,1],hn=[0,0,0,0,-1,0,-1,0,0,-1,0,-1,0,-1,0,0,-1,0,-1,0,-1,0,0,-1,0,-1,0,-1,0,0],cn=[0,0,0,-1,0,-1,0,0,0,0,0,1,0,1,0,0,0,-1,0,-1,0,0,0,0,0,1,0,1,0,0],_n=0,dn=0,vn=un.length,pn=hn.length,mn=[0,1,1,1,1,0,0],xn=[0,0,-1,-1,-1,0,0],Tn=0,yn=mn.length,gn=0,bn=0,{init:function(){_n=dn=Tn=gn=bn=0,ln=an=0,Cn.setPos(-8,143),Cn.setDir(3),Fe.setPos(-81,143),Fe.faceDirEnum=3,Fe.setDir(3),wn.setPos(234,142),wn.setDir(1),Me.setPos(302,143),Me.faceDirEnum=1,Me.setDir(1),Me.getNumSteps=Fe.getNumSteps=function(){return"11211212"[this.frames%8]}},update:function(){var t;if(0==ln){for(t=0;t<2;t++)wn.update(t),Cn.update(t);102==Cn.pixel.x&&ln++}else if(1==ln)wn.pixel.x-=mn[Tn],wn.pixel.y+=xn[Tn],wn.commitPos(),Cn.pixel.x+=mn[Tn],Cn.pixel.y+=xn[Tn],Cn.commitPos(),++Tn==yn&&ln++;else if(2==ln){if(0==gn)Cn.pixel.y-=2,Cn.commitPos(),Cn.setDir(0),wn.pixel.x-=1,wn.commitPos(),wn.setDir(0);else for(t=0;t<2;t++)wn.update(t),Cn.update(t);gn++,91==Cn.pixel.y&&ln++}else 3==ln&&(0==bn&&(Cn.pixel.y++,Cn.setDir(3),Cn.commitPos(),wn.pixel.y--,wn.pixel.x++,wn.setDir(1),wn.commitPos()),18<bn&&(wn.frames--,Cn.frames--),78==bn&&(delete Me.getNumSteps,delete Fe.getNumSteps,delete Me.steer,delete Fe.steer,delete Me.getAnimFrame,delete Fe.getAnimFrame,a(),Hi(In.nextState,60)),bn++);if(wn.frames++,Cn.frames++,0==an){for(t=0;t<2;t++)Me.update(t),Fe.update(t);Me.pixel.x=Math.max(120,Me.pixel.x),Me.commitPos(),Fe.pixel.x=Math.min(105,Fe.pixel.x),Fe.commitPos(),105==Fe.pixel.x&&an++}else 1==an&&(_n<vn&&(Me.pixel.x+=un[_n],Me.pixel.y+=fn[_n]),dn<pn&&(Fe.pixel.x+=hn[dn],Fe.pixel.y+=cn[dn]),_n++,dn++);Me.frames++,Fe.frames++},draw:function(){j.blitMap(),j.beginMapClip(),j.renderFunc(function(t){Sn(t,wn),Sn(t,Cn)}),_n<vn&&j.drawGhost(Me),dn<pn&&j.drawGhost(Fe),3==ln&&j.renderFunc(function(t){var e,i,n;i=112,n=73,(e=t).save(),e.translate(i,n),e.fillStyle="#ffb8ff",e.beginPath(),e.moveTo(0,-3),e.bezierCurveTo(-1,-4,-2,-6,-3.5,-6),e.quadraticCurveTo(-7,-6,-7,-.5),e.bezierCurveTo(-7,2,-2,5,0,7),e.bezierCurveTo(2,5,7,2,7,-.5),e.quadraticCurveTo(7,-6,3.5,-6),e.bezierCurveTo(2,-6,1,-4,0,-3),e.closePath(),e.fill(),e.restore()}),j.endMapClip()}})}})),Nn=(Pn=new Se,Fn=new Se,Mn=function(t,e){var i,n=e.getAnimFrame();e==Pn?i=1==m?$.drawPacmanSprite:$.drawOttoSprite:e==Fn&&(i=1==m?$.drawMsPacmanSprite:$.drawMsOttoSprite),i(t,e.pixel.x,e.pixel.y,e.dirEnum,n)},Dn=function(){return 3},zn=function(){return"32"[this.frames%2]},An=function(){return 7},f(en,{init:function(){en.init.call(this),Fn.frames=20,Pn.frames=12,Pn.getStepFrame=function(){return Math.floor(this.frames/4)%4},Fn.getStepFrame=function(){return Math.floor(this.frames/4)%4},Pn.steer=function(){},Fn.steer=function(){},s(),r()},triggers:{0:{draw:function(){j.blitMap()}},160:{init:function(){Pn.setPos(-8,67),Pn.setDir(3),Fn.setPos(-106,68),Fn.setDir(3),Pn.getNumSteps=zn,Fn.getNumSteps=Dn},update:kn=function(){var t;for(t=0;t<7;t++)Pn.update(t),Fn.update(t);Pn.frames++,Fn.frames++},draw:En=function(){j.blitMap(),j.beginMapClip(),j.renderFunc(function(t){Mn(t,Pn),Mn(t,Fn)}),j.endMapClip()}},410:{init:function(){Pn.setPos(329,163),Pn.setDir(1),Fn.setPos(231,164),Fn.setDir(1),Pn.getNumSteps=Dn,Fn.getNumSteps=zn},update:kn,draw:En},670:{init:function(){Pn.setPos(-8,142),Pn.setDir(3),Fn.setPos(-106,143),Fn.setDir(3),Pn.getNumSteps=zn,Fn.getNumSteps=Dn},update:kn,draw:En},930:{init:function(){Pn.setPos(381,99),Pn.setDir(1),Fn.setPos(233,100),Fn.setDir(1),Pn.getNumSteps=An,Fn.getNumSteps=An},update:function(){Pn.pixel.x<=17&&1==Pn.dirEnum&&(Pn.setPos(-2,195),Pn.setDir(3),Fn.setPos(-150,196),Fn.setDir(3)),kn()},draw:En},1140:{init:function(){a(),Hi(Nn.nextState,60)}}}})),Bn=function(){if(0==m){if(2==w)return Rn(pacmanCutscene1,Zi),!0}else if(1==m||3==m){if(2==w)return Rn(In,Zi),!0;if(5==w)return Rn(Nn,Zi),!0}else if(2==m){if(2==w)return Rn(cookieCutscene1,Zi),!0;if(5==w)return Rn(cookieCutscene2,Zi),!0}return!1};Pe.startDirEnum=1,Pe.startPixel={x:111,y:112+O},Pe.cornerTile={x:25,y:0},Pe.startMode=0,Pe.arriveHomeMode=5,Fe.startDirEnum=2,Fe.startPixel={x:111,y:136+O},Fe.cornerTile={x:2,y:0},Fe.startMode=4,Fe.arriveHomeMode=4,Me.startDirEnum=0,Me.startPixel={x:95,y:136+O},Me.cornerTile={x:27,y:34},Me.startMode=4,Me.arriveHomeMode=4,Ee.startDirEnum=0,Ee.startPixel={x:127,y:136+O},Ee.cornerTile={x:0,y:34},Ee.startMode=4,Ee.arriveHomeMode=4,ke.startDirEnum=1,ke.startPixel={x:111,y:208+O};var qn=new G(28,36,"______________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________||||||||||||||||||||||||____|                      |____| ||||| |||||||| ||||| |____| ||||| |||||||| ||||| |____| ||    ||    ||    || |____| || || || || || || || |__||| || || || || || || || |||       ||    ||    ||       ||| ||||| |||||||| ||||| |||__| ||||| |||||||| ||||| |____|    ||          ||    |____| || || |||||||| || || |____| || || |||||||| || || |____| ||    ||    ||    || |____| || || || || || || || |__||| || || || || || || || |||       ||    ||    ||       ||| |||||||| || |||||||| |||__| |||||||| || |||||||| |____|                      |____||||||||||||||||||||||||__________________________________________________________________________________________________________________________________________________________________________");qn.name="Pac-Man",qn.wallStrokeColor="#47b897",qn.wallFillColor="#000",qn.pelletColor="#ffb8ae",qn.shouldDrawMapOnly=!0;var On=new G(28,36,"____________________________________________________________________________________|||||||||||||||||||||||||||||............||............||.||||.|||||.||.|||||.||||.||o||||.|||||.||.|||||.||||o||.||||.|||||.||.|||||.||||.||..........................||.||||.||.||||||||.||.||||.||.||||.||.||||||||.||.||||.||......||....||....||......|||||||.||||| || |||||.||||||_____|.||||| || |||||.|__________|.||          ||.|__________|.|| |||--||| ||.|_____||||||.|| |______| ||.||||||      .   |______|   .      ||||||.|| |______| ||.||||||_____|.|| |||||||| ||.|__________|.||          ||.|__________|.|| |||||||| ||.|_____||||||.|| |||||||| ||.|||||||............||............||.||||.|||||.||.|||||.||||.||.||||.|||||.||.|||||.||||.||o..||.......  .......||..o||||.||.||.||||||||.||.||.||||||.||.||.||||||||.||.||.||||......||....||....||......||.||||||||||.||.||||||||||.||.||||||||||.||.||||||||||.||..........................|||||||||||||||||||||||||||||________________________________________________________");On.name="Pac-Man",On.wallStrokeColor="#2121ff",On.wallFillColor="#000",On.pelletColor="#ffb8ae",On.constrainGhostTurns=function(t,e){12!=t.x&&15!=t.x||14!=t.y&&26!=t.y||(e[0]=!1)};var Gn=function(t){return Wn(t)},Hn=function(t){if(1==t)return[1,2];if(2==t)return[3,5];var e=4*t-6;return[e,e+3]},Wn=function(t){var e=[Un,Jn,Vn,Kn][(t-=1)<=1?t:t%2+2];return 4<=t?[{wallFillColor:"#ffb8ff",wallStrokeColor:"#FFFF00",pelletColor:"#00ffff"},{wallFillColor:"#FFB8AE",wallStrokeColor:"#FF0000",pelletColor:"#dedeff"},{wallFillColor:"#de9751",wallStrokeColor:"#dedeff",pelletColor:"#ff0000"},{wallFillColor:"#2121ff",wallStrokeColor:"#ffb851",pelletColor:"#dedeff"}][t%4]:{wallFillColor:e.wallFillColor,wallStrokeColor:e.wallStrokeColor,pelletColor:e.pelletColor}},Yn=function(){var t,e=[Un,Jn,Vn,Kn],i=((t=w)<=2?1:t<=5?2:3+Math.floor((t-6)/4))-1;if(Ln=e[i<=1?i:i%2+2],4<=i){var n=Wn(i+1);Ln.wallFillColor=n.wallFillColor,Ln.wallStrokeColor=n.wallStrokeColor,Ln.pelletColor=n.pelletColor}},Un=new G(28,36,"____________________________________________________________________________________|||||||||||||||||||||||||||||......||..........||......||o||||.||.||||||||.||.||||o||.||||.||.||||||||.||.||||.||..........................||||.||.|||||.||.|||||.||.|||__|.||.|||||.||.|||||.||.|__|||.||.|||||.||.|||||.||.|||   .||.......||.......||.   |||.||||| |||||||| |||||.|||__|.||||| |||||||| |||||.|____|.                    .|____|.||||| |||--||| |||||.|____|.||||| |______| |||||.|____|.||    |______|    ||.|____|.|| || |______| || ||.|__|||.|| || |||||||| || ||.|||   .   ||          ||   .   |||.|||||||| || ||||||||.|||__|.|||||||| || ||||||||.|____|.......   ||   .......|____|.|||||.||||||||.|||||.|__|||.|||||.||||||||.|||||.||||............  ............||.||||.|||||.||.|||||.||||.||.||||.|||||.||.|||||.||||.||.||||.||....||....||.||||.||o||||.||.||||||||.||.||||o||.||||.||.||||||||.||.||||.||..........................|||||||||||||||||||||||||||||________________________________________________________");Un.name="Ms. Pac-Man 1",Un.wallFillColor="#FFB8AE",Un.wallStrokeColor="#FF0000",Un.pelletColor="#dedeff",Un.fruitPaths={entrances:[{start:{y:164,x:228},path:"<<<<vvv<<<<<<<<<^^^"},{start:{y:164,x:-4},path:">>>>vvvvvv>>>>>>>>>>>>>>>^^^<<<^^^"},{start:{y:92,x:-4},path:">>>>^^^^>>>vvvv>>>vvv>>>>>>>>>vvvvvv<<<"},{start:{y:92,x:228},path:"<<<<vvvvvvvvv<<<^^^<<<vvv<<<"}],exits:[{path:"<vvv>>>>>>>>>^^^>>>>"},{path:"<<<<vvv<<<<<<<<<^^^<<<<"},{path:"<<<<<<<^^^^^^<<<<<<^^^<<<<"},{path:"<vvv>>>>>>>>>^^^^^^^^^^^^>>>>"}]};var Jn=new G(28,36,"____________________________________________________________________________________||||||||||||||||||||||||||||       ||..........||       |||||| ||.||||||||.|| |||||||||||| ||.||||||||.|| |||||||o...........||...........o||.|||||||.||.||.||.|||||||.||.|||||||.||.||.||.|||||||.||.||......||.||.||......||.||.||.|||| ||....|| ||||.||.||.||.|||| |||||||| ||||.||.||......|| |||||||| ||......|||||||.||          ||.||||||||||||.|| |||--||| ||.|||||||......|| |______| ||......||.||||.|| |______| ||.||||.||.||||.   |______|   .||||.||...||.|| |||||||| ||.||...||||.||.||          ||.||.|||__|.||.|||| |||| ||||.||.|____|.||.|||| |||| ||||.||.|____|.........||||.........|____|.|||||||.||||.|||||||.|__|||.|||||||.||||.|||||||.|||   ....||...    ...||....   |||.||.||.||||||||.||.||.||||||.||.||.||||||||.||.||.||||o..||.......||.......||..o||.||||.|||||.||.|||||.||||.||.||||.|||||.||.|||||.||||.||..........................|||||||||||||||||||||||||||||________________________________________________________");Jn.name="Ms. Pac-Man 2",Jn.wallFillColor="#47b8ff",Jn.wallStrokeColor="#dedeff",Jn.pelletColor="#ffff00",Jn.fruitPaths={entrances:[{start:{y:212,x:228},path:"<<<<^^^<<<<<<<<^^^<"},{start:{y:212,x:-4},path:">>>>^^^>>>>>>>>vvv>>>>>^^^^^^<"},{start:{y:36,x:-4},path:">>>>>>>vvv>>>vvvvvvv>>>>>>>>>vvvvvv<<<"},{start:{y:36,x:228},path:"<<<<<<<vvv<<<vvvvvvvvvvvvv<<<"}],exits:[{path:"vvv>>>>>>>>vvv>>>>"},{path:"vvvvvv<<<<<^^^<<<<<<<<vvv<<<<"},{path:"<<<<<<<^^^^^^^^^^^^^<<<^^^<<<<<<<"},{path:"vvv>>>>>^^^^^^^^^^>>>>>^^^^^^<<<<<^^^>>>>>>>"}]};var Vn=new G(28,36,"____________________________________________________________________________________|||||||||||||||||||||||||||||.........||....||.........||.|||||||.||.||.||.|||||||.||o|||||||.||.||.||.|||||||o||.||.........||.........||.||.||.||.||||.||.||||.||.||.||....||.||||.||.||||.||....|||||.||.||||.||.||||.||.||||||||.||..............||.|||| ....|||| |||||||| ||||.... |.|| |||| |||||||| |||| ||.||.||                    ||.||.|||| || |||--||| || ||||.||.|||| || |______| || ||||.||.     || |______| ||     .||.|| |||| |______| |||| ||.||.|| |||| |||||||| |||| ||.||.||                    ||.||.|||| ||||| || ||||| ||||.||.|||| ||||| || ||||| ||||.||......||....||....||......||||.||.||.||||||||.||.||.||||||.||.||.||||||||.||.||.||||o..||.......  .......||..o||.||||.|||||.||.|||||.||||.||.||||.|||||.||.|||||.||||.||......||....||....||......||.||||.||.||||||||.||.||||.||.||||.||.||||||||.||.||||.||......||..........||......|||||||||||||||||||||||||||||________________________________________________________");Vn.name="Ms. Pac-Man 3",Vn.wallFillColor="#de9751",Vn.wallStrokeColor="#dedeff",Vn.pelletColor="#ff0000",Vn.fruitPaths={entrances:[{start:{y:100,x:228},path:"<<<<<vv<<<<<vvvvvv<<<"},{start:{y:100,x:-4},path:">>>>>vv>>>>>>>>>>>>>>vvvvvv<<<"},{start:{y:100,x:-4},path:">>>>>vv>>>>>>>>>>>>>>vvvvvv<<<"},{start:{y:100,x:228},path:"<<vvvvv<<<vvv<<<<<<<<"}],exits:[{path:"<vvv>>>vvv>>>^^^>>>>>^^^^^^^^^^^>>"},{path:"<<<<vvv<<<vvv<<<^^^<<<<<^^^^^^^^^^^<<"},{path:"<<<<vvv<<<vvv<<<^^^<<<<<^^^^^^^^^^^<<"},{path:"<vvv>>>vvv>>>^^^^^^<<<^^^^^^>>>>>^^>>>>>"}]},Vn.constrainGhostTurns=function(t,e,i){12==t.y&&(1==t.x&&3==i||26==t.x&&1==i)&&(e[2]=!1)};var Kn=new G(28,36,"____________________________________________________________________________________|||||||||||||||||||||||||||||..........................||.||.||||.||||||||.||||.||.||o||.||||.||||||||.||||.||o||.||.||||.||....||.||||.||.||.||......||.||.||......||.||.||||.||.||.||.||.||.||||.||.||||.||.||.||.||.||.||||.||......||....||....||......||||.|||||||| || ||||||||.|||__|.|||||||| || ||||||||.|____|....||          ||....|__||| ||.|| |||--||| ||.|| |||    ||.|| |______| ||.||    ||||||.   |______|   .||||||||||||.|| |______| ||.||||||    ||.|| |||||||| ||.||    ||| ||.||          ||.|| |||__|....||||| || |||||....|____|.||.||||| || |||||.||.|____|.||....   ||   ....||.|____|.|||||.|| || ||.|||||.|__|||.|||||.|| || ||.|||||.||||.........||    ||.........||.||||.||.||||||||.||.||||.||.||||.||.||||||||.||.||||.||.||...||..........||...||.||o||.|||||||.||.|||||||.||o||.||.|||||||.||.|||||||.||.||............||............|||||||||||||||||||||||||||||________________________________________________________");Kn.name="Ms. Pac-Man 4",Kn.wallFillColor="#2121ff",Kn.wallStrokeColor="#ffb851",Kn.pelletColor="#dedeff",Kn.fruitPaths={entrances:[{start:{y:156,x:228},path:"<<<<vv<<<vv<<<<<<^^^"},{start:{y:156,x:-4},path:">>>>vv>>>vv>>>>>>vvv>>>^^^^^^"},{start:{y:132,x:-4},path:">>>>^^^^^>>>^^^>>>vvv>>>vvv>>>>>>vvvvvv<<<"},{start:{y:132,x:228},path:"<<<<^^<<<vvv<<<vvv<<<"}],exits:[{path:"<vvv>>>>>>^^>>>^^>>>>"},{path:"<<<<vvv<<<<<<^^<<<^^<<<<"},{path:"<<<<<<<^^^<<<^^^<<<vv<<<<"},{path:"<vvv>>>>>>^^^^^^^^^>>>vv>>>>"}]};var jn=[function(l){var u=7;function t(t,e,i,n,o){var r=5,s=(u+3)*(+t+1),a=e;l.fillText(a,r,s),l.save(),l.fillStyle=n,r+=l.measureText(a).width+3,l.fillText(i,r,s),l.restore(),r+=l.measureText(i).width+3,l.fillText(o,r,s)}l.save(),l.textAlign="left",l.font=u+"px courier",l.strokeStyle="#fff",l.fillStyle="#fff";var e=[["FreeNode IRC","#tari-dev","blue","Mon 9am/Thu 4pm(UCT)"],["[06:01]","notabot","yellow","joined the channel."],["[06:03]","<hi_joe>","green","bru. why hasn't RFC-0420 been merged?"],["[06:04]","<fluffypony>","orange","because it's a proposal to distribute"],["","","orange","weed on the blockchain."],["[06:05]","<notabot>","yellow","please sir, wen ICO?"],["[06:05]","<fluffypony>","orange","slays notabot where he stands."],["[06:10]","<newguy23>","pink","what's a blockchain?"],["[06:11]","<fluffypony>","orange","There's a TLU for that."],["[06:14]","<n00b12>","#d5a","what's a scriptless script?"],["[06:14]","<fluffypony>","orange","There's a TLU for that."],["[06:23]","<jess>","purple","what's merge-mining?"],["[06:36]","<fluffypony>","orange","https://tlu.tarilabs.com"],["[06:23]","<jess>","purple","Wow, TLU is awesome. Needs more memes tho"],["[06:35]","<stillnotabot>","lightblue","Admin, PM. I have amazink offer"],["[06:40]","<csw>","#f88","I submitted a PR on tari-project/tari"],["[06:40]","<fluffypony>","orange","thanks. will review"],["[06:45]","<fluffypony>","orange","@csw, this is 'Hello, world' in Rust"],["[06:45]","<fluffypony>","orange","and it doesn't compile"],["[06:45]","<fluffypony>","orange","and you spelled 'hello' wrong"],["[06:40]","<csw>","#f88","Screw u. Im makin by own blokchane. in PHP"],["[07:12]","<augustus_baggins>","#58e","guise, when next puzzle?"],["[07:12]","<cjs77>","#44f","two weeks (TM)"],["[07:15]","<pickle_rick>","#2f4","Your boss left. Back to the game!"]];for(var i in e){var n=e[i];n.unshift(i),t.apply(null,n)}l.restore()},function(t){var e=["TARI LABS Disk Operating System 4.20","(C) Copyright  1992-2019 TariLabs","","C:\\> dir"," Volume in drive C is TARI"," Volume Serial Number is 1833-B2DF-104A-D48B-90A0-11BF",""," KQ3          <DIR>                           11-08-86"," MONTEZ~1     <DIR>                           11-10-84"," LSLLLL       <DIR>                           05-07-87"," WINGCOM3     <DIR>                           27-03-94"," SQ1          <DIR>                           15-10-86"," PQ1          <DIR>                           01-09-87"," PICS         <DIR>                           05-10-92"," WORK         <DIR>                           04-11-95"," USER.TXT                                     01-01-70"," SYS.COM                                      01-01-70"," PASSWORD.TXT                                 01-01-70","                            3 file(s) 15,762,198 bytes","                         8 dir(s) 5,209,322 bytes free"];t.save(),t.textAlign="left",t.font="8px dos437,courier",t.strokeStyle="#fff",t.fillStyle="#fff";for(var i=0;i<e.length;i++)t.fillText(e[i],5,11*(i+1));t.restore()},function(t){var e=["Classified Advertising Dept.","Ball Street Journal","10001 Broadway","New York, NY 10001","","Gentlemen","","Enclosed please find my personal check in the amount of","$57.30 to cover three insertions of the following classified",'advertisement in your "Seeking Position" department:',"","   Mature, experienced software analyst available. Bug",'   installation a proven speciality. "No version too','   clean." Familiar with DOS 1.0, AGI and SCI.'];t.save(),t.textAlign="left",t.font="7px dos437,courier",t.strokeStyle="#fff",t.fillStyle="#00ff00";for(var i=0;i<e.length;i++)t.fillText(e[i],5,10*(i+1));t.restore()},function(t){var e=["","C\\>ls","Bad command or file name","","C\\>type user.txt","1tAR19","","C\\>type password.txt","RixQ","","C\\>type sys.com","sbXLUkXhjZFMaRUxp5saDwE","","C\\>_"];t.save(),t.textAlign="left",t.font="8px dos437,courier",t.strokeStyle="#fff",t.fillStyle="#fff";for(var i=0;i<e.length;i++)t.fillText(e[i],5,11*(i+1));t.restore()},function(t){t.save(),t.translate(-17,80),t.fillStyle="#00ffff",t.fillRect(0,0,260,6),t.fillRect(0,0,12,116);var e=["        A        B        C        D        E        F        G        H","  0","  1","  2","  3","  4","  5","  6","  7","  8","  9"," 10"," 11"," 12"," 13"," 14"," 15"," 16"," 17"," 18"," 19"," 20"];t.textAlign="left",t.font="6px dos437,courier",t.strokeStyle="#fff",t.fillStyle="#000000";for(var i=0;i<e.length;i++)t.fillText(e[i],0,5*i);t.fillStyle="#FFFFFF";for(var n=["","","                             REVENUES FROM DIFFERENT CITIES","","                       JANUARY  FEBRUARY  MARCH    APRIL     MAY     JUNE","","    SAN FRANCISCO","    LOS ANGELES","    BOSTON","    CHICAGO","    NEW YORK","    DENVER","    HOUSTON","    SAN DIEGO","    OAKLAND","    SAN JOSE","    RENO","    LAS VEGAS"],i=0;i<n.length;i++)t.fillText(n[i],0,5*i);var o=[259,265,325,329,334,395,133,191,256,250,250,260,127,196,246,255,256,257,137,196,255,262,259,257,131,184,244,251,257,266,139,194,246,251,251,262,131,189,245,252,252,256,135,193,252,257,254,260,129,181,256,250,266,266,140,194,242,260,265,264,125,191,244,249,256,257,128,181,255,260,266,270];t.textAlign="right";for(var r=0,s=0,i=0;i<o.length;i++)t.fillText(o[i].toFixed(3),102+30*s,30+5*r),6<=(s+=1)&&(r+=1,s=0);t.restore()},function(t){t.save(),t.translate(12,80),t.fillStyle="#4cbb17",t.textAlign="right",t.font="10px dos437,courier",t.strokeStyle="#fff";for(var e=0;e<5;e++)t.fillRect(0,26*e,209,1),1<=e&&t.fillText(5*e,-1,100-26*e);t.fillText(0,-1,105),t.textAlign="center";for(var i=0;i<9;i++)t.fillRect(26*i,0,1,105),1<=i&&t.fillText(5*i,26*i,106);t.strokeStyle="#ff0000",t.lineWidth=2,t.beginPath(),t.moveTo(1,70.2),t.lineTo(20.8,70.2),t.lineTo(39,76.7),t.lineTo(65,39),t.lineTo(3.4*26,62.4),t.lineTo(104,39),t.lineTo(117,1.8*26),t.lineTo(130,31.2),t.lineTo(5.8*26,31.2),t.lineTo(208,1),t.stroke(),t.closePath(),t.restore()}],Qn=function(t,e,i,n){(0,jn[(e-1)%jn.length])(t,i,n)};window.addEventListener("load",function(){var e,i,n,o,r;!function(){var t,e,i;if(localStorage&&localStorage.highScores)for(e=(t=JSON.parse(localStorage.highScores)).length,i=0;i<e;i++)P[i]=Math.max(P[i],t[i])}(),it(),$.create(),o=n=i=e=0,r=function(t){t.preventDefault(),e=i=n=o=0},document.onclick=function(t){ke.clearInputDir(void 0)},document.ontouchstart=function(t){t.preventDefault(),1==t.touches.length?(e=t.touches[0].pageX,i=t.touches[0].pageY):r(t)},document.ontouchend=function(t){t.preventDefault()},document.ontouchmove=function(t){t.preventDefault(),1==t.touches.length?(n=t.touches[0].pageX-e,o=t.touches[0].pageY-i,16<=n*n+o*o&&(e+=n,i+=o,Math.abs(n)>=Math.abs(o)?ke.setInputDir(0<n?3:1):ke.setInputDir(0<o?2:0))):r(t)},document.ontouchcancel=r;var t=window.location.hash.substring(1);if("learn"==t)Hi(Yi);else if("cheat_pac"==t||"cheat_mspac"==t){m="cheat_pac"==t?0:1,Hi(Qi);for(var s=0;s<4;s++)Ae[s].isDrawTarget=!0,Ae[s].isDrawPath=!0}else Hi(Ji);Gi.init()})}();